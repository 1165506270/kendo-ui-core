<%
def encode(value)
    value.to_s.gsub("&", "&amp;").gsub("<", "&lt;").gsub(">", "&gt;")
end

def output(title, issues)
    return if issues.length == 0

    out = "<h4>#{encode(title)}</h4><ul>"

    issues.each do |issue|
        out += "<li>#{encode(issue.title)}</li>"
    end

    out += "</ul>"

    out
end
%>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Changelog for Kendo UI v<%= VERSION %></title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }

        body {
            font: .75em/1.5 Tahoma, sans-serif;
        }

        h2 {
            margin: 1em 0 .3em;
            border-bottom: 1px solid #ccc;
            padding-bottom: .2em;
        }

        #page {
            width: 50em;
            margin: 0 auto 2em;
            border-radius: 0 0 1em 1em;
            box-shadow: 0 0 10px #ccc;
            padding: 1em 2em 2em;
        }
    </style>
</head>
<body>
    <div id="page">
        <h1>Release notes for Kendo UI v<%= VERSION %></h1>
% suites.each do |suite|
        <h2><%= encode(suite.title) %></h2>

        <%= output("What's new", suite.features) %>
        <%= output("What's fixed", suite.bugs) %>

% suite.components.each do |component_title, component|
        <h3><%= encode(component_title) %></h3>

        <%= output("What's new", component.features) %>
        <%= output("What's fixed", component.bugs) %>

% end
% end
    </div>
</body>
</html>
