<!DOCTYPE html>
<html>
    <head>
        <title>Bar Chart</title>
        <script src="../src/jquery.js"></script>
        <script src="../src/kendo.core.js"></script>
        <script src="../src/kendo.data.js"></script>
        <script src="../src/kendo.chart.js"></script>
    </head>
    <body>
        <script type="text/javascript">

            var data = [],
                sample = [
                {
                    name: "Alpha",
                    a: 15,
                    b: 20,
                    c: 15,
                    d: 20
                }, {
                    name: "Beta",
                    a: -25,
                    b: -20,
                    c: -15,
                    d: -20
                }, {
                    name: "Gamma",
                    a: 20,
                    b: 30,
                    c: 20,
                    d: null
                }, {
                    name: "Delta",
                    a: 20,
                    b: 30,
                    c: 20,
                    d: 30
                }, {
                    name: "Epsilon",
                    a: 20,
                    b: 30,
                    c: 20,
                    d: 30
                }
            ];

            /*
            for(var i = 0; i < 30; i++) {
                data.push({
                    name: "",
                    a: i,
                    b: i + 5,
                    c: i + 10,
                    d: i + 15
                });
            }
            */

            data = sample;

            $(document).ready(function() {
                $("#container").kendoChart({
                    title: {
                        text: "Teh chart",
                        position: "top"
                    },
                    legend: {
                        position: "right",
                        visible: true
                    },
                    dataSource: data,
                    seriesDefaults: {
                        labels: {
                            visible: true
                        },
                        type: "line",
                        stack: false
                    },
                    series: [
                        {
                            name: "Value C",
                            field: "c"
                        },
                        {
                            name: "Value D",
                            field: "d",
                            type: "line",
                            markers: {
                                type: "circle"
                            }
                        }
                    ],
                    categoryAxis: {
                        field: "name",
                        labels: {
                            rotation: 90,
                            font: "12px Verdana, sans-serif"
                        }
                    },
                    valueAxis: {
                        labels: {
                            rotation: 90
                        }
                    },
                    seriesClick: function(e) {
                    },
                    tooltip: {
                        visible: true
                    }
                });
            });

        </script>

        <div id="container" style="width: 600px; height: 400px; float: left; margin-left: 100px;">
        </div>

            <div class="configurator" style="margin-top: 30px; clear: both;">
                <div>
                    <input  id="typeColumn" name="type"
                            type="radio" checked="checked" autocomplete="off" />
                    <label for="typeColumn">Column</label>

                    <input id="barColumn" name="type"
                           type="radio" value="Bar" autocomplete="off" />
                    <label for="barColumn">Bar</label>

                    <input id="stack" type="checkbox" autocomplete="off" />
                    <label for="stack">Stacked</label>
                </div>
                <fieldset style="width: 100px;">
                    <legend>Labels</legend>
                    <p>
                        <input id="center" name="labelType"
                           type="radio" value="center" autocomplete="off" />
                        <label for="center">center</label>
                    </p>
                    <p>
                        <input id="insideEnd" name="labelType"
                           type="radio" value="insideEnd" autocomplete="off" />
                        <label for="insideEnd">insideEnd</label>
                    </p>
                    <p>
                        <input id="insideBase" name="labelType"
                           type="radio" value="insideBase" autocomplete="off" />
                        <label for="insideBase">insideBase</label>
                    </p>
                    <p>
                        <input id="outsideEnd" name="labelType"
                           type="radio" checked="checked" value="outsideEnd" autocomplete="off" />
                        <label for="outsideEnd">outsideEnd</label>
                    </p>
                </fieldset>
            </div>

        <input type="button" id="animate" value="Dance, dance!" />
        <script type="text/javascript">
            $(".configurator input").change(function() {
                var chart = $("#container").data("kendoChart"),
                    series = chart.options.series,
                    type = $("#typeColumn").attr("checked") === "checked" ? "column" : "bar",
                    stack = $("#stack").attr("checked") === "checked",
                    labelPosition = $("input[name=labelType]:checked").val();

                for (var i = 0, length = chart.options.series.length; i < length; i++) {
                    series[i].type = type;
                    series[i].stack = stack;
                    series[i].labels.position = labelPosition;
                };

                chart.refresh();
            });

            var FRAMES = 40,
                STEP = 1,
                MAX_DATA = 400,
                direction = 1;

            var view;
            $("#animate").click(function() {
                var chart = $("#container").data("kendoChart"),
                    data = chart.options.dataSource,
                    frame = 0;

                var start = new Date();
                function step() {
                    for (var i = 0, length = data.length; i < length; i++) {
                        var point = data[i];
                        point.a = (point.a + direction * STEP) % MAX_DATA;
                        point.b = (point.b + direction * STEP) % MAX_DATA;
                        point.c = (point.c - direction * STEP) % MAX_DATA;
                    };

                    /*
                if (!view) {
                    view = chart._model.getView();
                }
                view.renderTo(chart.element[0]);
                */
                    chart.refresh();

                    if (frame++ < FRAMES) {
                        setTimeout(step, 0);
                    } else {
                        var duration = (new Date()) - start,
                            fps = (FRAMES / duration) * 1000;

                        if (console) {
                            console.log(Math.round(fps) + " FPS");
                        }

                        direction = direction * -1;
                    }
                }

                step();
            });
        </script>

    </body>
</html>


