<!DOCTYPE html>
<html>
    <head>
        <title>Bar Chart</title>
        <script src="../src/jquery.js"></script>
        <script src="../src/kendo.core.js"></script>
        <script src="../src/kendo.query.js"></script>
        <script src="../src/kendo.data.js"></script>
        <script src="../src/kendo.chart.js"></script>
    </head>
    <body>
        <script type="text/javascript">

            var data = [],
                sample = [
                {
                    name: "Alpha",
                    a: 15,
                    b: 20,
                    c: 15,
                    d: 20
                }, {
                    name: "Beta",
                    a: -5,
                    b: -20,
                    c: -5,
                    d: -20
                }, {
                    name: "Gamma",
                    a: 20,
                    b: 30,
                    c: 20,
                    d: 30
                }
            ];

            /*
            for(var i = 0; i < 30; i++) {
                data.push({
                    name: "",
                    a: i,
                    b: i + 5,
                    c: i + 10,
                    d: i + 15
                });
            }
            */

            data = sample;

            $(document).ready(function() {
                $("#container").kendoChart({
                    title: {
                        text: "Teh chart",
                        position: "top"
                    },
                    legend: {
                        position: "right",
                        visible: true
                    },
                    dataSource: data,
                    seriesDefaults: {
                        labels: {
                            visible: false
                        },

                        column: {
                            //stack: true
                        },

                        line: {
                            //stack: true
                        }
                    },
                    series: [
                        {
                            name: "Value A",
                            field: "a",
                            opacity: 0.2
                        }, {
                            name: "Value B",
                            field: "b"
                        }, {
                            type: "line",
                            name: "Value C",
                            field: "c",
                            opacity: 0.2
                        }, {
                            type: "line",
                            name: "Value D",
                            field: "d",
                            markers: {
                                type: "circle"
                            }
                        }
                    ],
                    categoryAxis: {
                        field: "name"
                    },
                    valueAxis: {
                        min: -100,
                        max: 100
                    },
                    plotArea: {
                    }
                });

                $("#containerV").kendoChart({
                    title: {
                        text: "Teh chart",
                        position: "top"
                    },
                    legend: {
                        position: "right",
                        visible: true
                    },
                    dataSource: data,
                    seriesDefaults: {
                        labels: {
                            visible: false
                        },
                        type: "bar",
                        bar: {
                            stack: true
                        },
                        line: {
                            stack: true
                        }
                    },
                    series: [
                        {
                            name: "Value A",
                            field: "a"
                        }, {
                            name: "Value B",
                            field: "b"
                        }, {
                            type: "line",
                            name: "Value C",
                            field: "c"
                        }, {
                            type: "line",
                            name: "Value D",
                            field: "d"
                        }
                    ],
                    categoryAxis: {
                        field: "name"
                    },
                    valueAxis: {
                        min: -100,
                        max: 100
                    },
                    plotArea: {
                    }
                });
            });

            var options = {
                theme: "", // Built-in theme name or custom theme object
                title: {
                    text: "",
                    font: "18px Verdana, sans-serif",
                    position: "top", // "top", "bottom"
                    textAlign: "center" // "left", "center", "right"
                },
                legend: {
                    font: "12px Verdana, sans-serif",
                    position: "right", // "top", "bottom", "left", "right"
                    offsetX: 0,
                    offsetY: 0,
                    visible: true
                },
                plotArea: {
                    background: "#fff",
                    margin: 20
                },
                chartArea: {
                    background: "#fff"
                },
                axisDefaults: {
                    tickSize: 4,
                    reverseOrientation: true, // Just an idea
                    majorTickType: "outside", // "outside", "inside", "none", "cross"
                    minorTickType: "none", // "outside", "inside", "none", "cross"
                    lineWidth: 1
                },
                categoryAxis: {
                    // Shorthand for the default category axis
                    categories: [],
                    field: ""
                },
                valueAxis: {
                    type: "Numeric"
                },
                axes: [{
                    // For advanced axis configuration
                }],
                dataSource: null,
                series: [ ],
                seriesColors: ["#d7df23", "#adc32b", "#799b28", "#4c7520"],
                seriesDefaults: {
                    type: "column",
                    field: "",
                    data: [],
                    bar: {
                        stack: false, // true, false or group name
                        gap: 1.5,
                        borderWidth: 0,
                        borderColor: "",
                        glassEffect: false,
                        labels: {
                            font: "12px Verdana, sans-serif",
                            visible: false,
                            position: "outsideEnd",
                                   // "outsideEnd", "insideEnd", "insideBase", "center"
                            color: "" // Derived from theme
                        }
                    }
                }
            };

            themes = {
                helloKitty: {
                    seriesColors: ["#d7df23", "#adc32b", "#799b28", "#4c7520"],
                    seriesDefaults: {
                        bar: {
                            glassEffect: true
                        }
                    }
                }
            }
        </script>

        <div id="container" style="width: 500px; height: 400px; float: left;">
        </div>

        <div id="containerV" style="width: 500px; height: 400px; float: left;">
        </div>

            <div class="configurator" style="margin-top: 30px; clear: both;">
                <div>
                    <input  id="typeColumn" name="type"
                            type="radio" checked="checked" autocomplete="off" />
                    <label for="typeColumn">Column</label>

                    <input id="barColumn" name="type"
                           type="radio" value="Bar" autocomplete="off" />
                    <label for="barColumn">Bar</label>

                    <input id="stack" type="checkbox" autocomplete="off" />
                    <label for="stack">Stacked</label>
                </div>
                <fieldset style="width: 100px;">
                    <legend>Labels</legend>
                    <p>
                        <input id="center" name="labelType"
                           type="radio" value="center" autocomplete="off" />
                        <label for="center">center</label>
                    </p>
                    <p>
                        <input id="insideEnd" name="labelType"
                           type="radio" value="insideEnd" autocomplete="off" />
                        <label for="insideEnd">insideEnd</label>
                    </p>
                    <p>
                        <input id="insideBase" name="labelType"
                           type="radio" value="insideBase" autocomplete="off" />
                        <label for="insideBase">insideBase</label>
                    </p>
                    <p>
                        <input id="outsideEnd" name="labelType"
                           type="radio" checked="checked" value="outsideEnd" autocomplete="off" />
                        <label for="outsideEnd">outsideEnd</label>
                    </p>
                </fieldset>
            </div>

        <input type="button" id="animate" value="Dance, dance!" />
        <script type="text/javascript">
            $(".configurator input").change(function() {
                var chart = $("#container").data("kendoChart"),
                    series = chart.options.series,
                    type = $("#typeColumn").attr("checked") === "checked" ? "column" : "bar",
                    stack = $("#stack").attr("checked") === "checked",
                    labelPosition = $("input[name=labelType]:checked").val();

                for (var i = 0, length = chart.options.series.length; i < length; i++) {
                    series[i].type = type;
                    series[i].stack = stack;
                    series[i].labels.position = labelPosition;
                };

                chart.refresh();
            });

            var FRAMES = 40,
                STEP = 1,
                MAX_DATA = 400,
                direction = 1;

            var view;
            $("#animate").click(function() {
                var chart = $("#container").data("kendoChart"),
                    data = chart.options.dataSource,
                    frame = 0;

                var start = new Date();
                function step() {
                    for (var i = 0, length = data.length; i < length; i++) {
                        var point = data[i];
                        point.a = (point.a + direction * STEP) % MAX_DATA;
                        point.b = (point.b + direction * STEP) % MAX_DATA;
                        point.c = (point.c - direction * STEP) % MAX_DATA;
                    };

                    /*
                if (!view) {
                    view = chart._model.getView();
                }
                view.renderTo(chart.element[0]);
                */
                    chart.refresh();

                    if (frame++ < FRAMES) {
                        setTimeout(step, 0);
                    } else {
                        var duration = (new Date()) - start,
                            fps = (FRAMES / duration) * 1000;

                        if (console) {
                            console.log(Math.round(fps) + " FPS");
                        }

                        direction = direction * -1;
                    }
                }

                step();
            });
        </script>

    </body>
</html>


