<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>ComboBox</title>
        <script src="../src/jquery.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.core.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.fx.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.data.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.popup.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.selectable.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.list.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.combobox.js" type="text/javascript" charset="utf-8"></script>
        <link rel="stylesheet" href="../styles/kendo.common.css" type="text/css" media="screen" charset="utf-8">
        <link rel="stylesheet" href="../styles/kendo.blueopal.css" type="text/css" media="screen" charset="utf-8">
        <style type="text/css" media="screen">
            .k-state-selected
            {
                background-color: red;
            }

            ul
            {
                padding: 0;
                margin: 0;
                border: 1px solid black;
                width: 200px;
            }
            ul li
            {
                list-style:none;
            }
        </style>
    </head>
    <body>
        dataSource: [{text: "foo", value: 1}, {text:"bar", value:2}, {text: "baz", value: 3}, {text:"2", value:4}],
        <fieldset>
            <legend>Vanilla input</legend>
            <input />
        </fieldset>
        <fieldset>
            <legend>Vanilla SELECT</legend>
            <select onchange="console.log('change')">
                <option value="1">Foo</option>
                <option></option>
                <option value="2">Bar</option>
                <option value="3">Baz</option>
            </select>
        </fieldset>
        <fieldset>
            <legend>Change filter type:</legend>
            <select id="filter" onchange="filterTypeChanged()">
                <option value="none">None</option>
                <option value="startswith">Starts with</option>
                <option value="contains">Contains</option>
                <option value="eq">Equal</option>
            </select>
        </fieldset>
        <fieldset>
            <legend>Suggest:</legend>
            <input id="suggest" type="checkbox" onchange="suggestChanged()"/>
        </fieldset>
        <fieldset>
            <legend>ComboBox - INPUT</legend>
            <input  id="combobox" onchange="console.log('input + select change')"/>
        </fieldset>
        <fieldset>
            <legend>ComboBox - SELECT</legend>
            <select  id="select" onchange="console.log('ddl + select change')">
            </select>
        </fieldset>
        <fieldset>
            <legend>ComboBox - Remote jsonp</legend>
            <input  id="remote" /> /
            <input id="searchCriteria" value="var" />
        </fieldset>
        <fieldset>
            <legend>ComboBox - INPUT - DISABLED </legend>
            <input  id="disabled" disabled="disabled" />
        </fieldset>
        <fieldset>
            <legend> ComboBox - 10000 items </legend>
            <select id="big"></select>
        </fieldset>
        <fieldset>
            <legend> Shared dataSource</legend>
            <input  id="shared1" value="item4" /> /
            <input  id="shared2" />
            <input  id="shared3" />
        </fieldset>
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                 var remoteDataSource = new kendo.data.DataSource({
                    transport: {
                        read: {
                            url: "http://ws.geonames.org/searchJSON",
                            dataType: "jsonp",
                            cache: true
                        },
                        cache: "inmemory",
                        dialect: function() {
                            return { name_startsWith: $("#searchCriteria").val() };
                        }
                    },
                    schema: {
                        data: function(result) {
                            return result.geonames;
                        }
                    }
                });

                $("#combobox").kendoComboBox({
                    dataSource: [{text: "foo", value: 1}, {text:"<script>alert('hi');<\/script>bar", value:2}, {text: "baz", value: 3}, {text:"2", value:4}],
                    autoBind: false,
                    close: function() {console.log("closeD") },
                    open: function() {console.log("open") }
                });
                $("#select").kendoComboBox({
                    dataSource: [{text: "foo", value: 1}, {text:"bar", value:2}, {text: "baz", value: 3}, {text:"2", value:4}],
                    filter: "startswith"
                });
                $("#remote").kendoComboBox({
                    dataTextField: "name",
                    dataValueField: "countryName",
                    dataSource: remoteDataSource,
                    autoBind: false
                });

                $("#searchCriteria").bind("change", function() {
                    remoteDataSource.read();
                });

                $("#disabled").kendoComboBox({
                    dataSource: [{text: "foo", value: 1}, {text:"bar", value:2}, {text: "baz", value: 3}, {text:"2", value:4}],
                    enable: false
                });

                var options = "";
                for (var i = 0; i < 10000; i++) {
                   var option = "<option"
                       option += " value=" + i;

                   option += ">";

                   option += "text" + i;

                   option += "</option>";
                   options += option;
                }

                var big = $("#big");
                big.html(options);

                big.kendoComboBox({
                    autoBind: false,
                    filter: "contains"
                });

                window.sharedDataSource = new kendo.data.DataSource.create([
                    {text: "item1", value: "1"},
                    {text: "item2", value: "2"},
                    {text: "item3", value: "3"},
                    {text: "item4", value: "4"},
                    {text: "item5", value: "5"}
                ]);

                $("#shared1").kendoComboBox({
                    filter: "contains",
                    autoBind: false,
                    dataSource: sharedDataSource
                });

                $("#shared2").kendoComboBox({
                    filter: "contains",
                    autoBind: false,
                    dataSource: sharedDataSource
                });

                $("#shared3").kendoComboBox({
                    autoBind: false,
                    dataSource: sharedDataSource
                });
            });

            function filterTypeChanged() {
                var filter = $("#filter").val();

                $(".k-widget").each(function (i, el) {
                    var element = $(el).find("input:hidden, select:hidden").data("kendoComboBox");
                    if (element) {
                       element.options.filter = filter;
                    }
                });
            }

            function suggestChanged() {
                var suggest = $("#suggest").prop("checked");

                $(".k-widget").each(function (i, el) {
                    var element = $(el).find("input:hidden, select:hidden").data("kendoComboBox");
                    if (element) {
                       element.options.suggest = suggest;
                    }
                });
            }

        </script>
    </body>
</html>
