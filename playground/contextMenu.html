<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <link type="text/css" href="../styles/web/kendo.common.css" rel="stylesheet"/>
    <link type="text/css" href="../styles/web/kendo.blueopal.less" rel="stylesheet/less"/>
    <script type="text/javascript" src="../demos/mvc/content/shared/js/less.js"></script>

    <script type="text/javascript" src="../src/jquery.js"></script>
    <script type="text/javascript" src="../src/kendo.core.js"></script>
    <script type="text/javascript" src="../src/kendo.fx.js"></script>
    <script type="text/javascript" src="../src/kendo.popup.js"></script>
    <script type="text/javascript" src="../src/kendo.menu.js"></script>
    <script type="text/javascript" src="../src/kendo.data.js"></script>
    <script type="text/javascript" src="../src/kendo.treeview.js"></script>
    <style type="text/css">
        body
        {
            font: 12px Arial, Helvetica, sans-serif;
        }

        .k-context-menu .k-link
        {
            padding: 0.4em 2em 0.3em 0.9em;
        }

        .k-context-menu
        {
            border: 0;
        }
    </style>
</head>
<body>
    <ul id="target">
        <li>
            Item 1
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
            </ul>
        </li>
        <li>
            Item 2
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
            </ul>
        </li>
        <li>
            Item 3
            <ul>
                <li>Sub Item 1</li>
                <li>Sub Item 2</li>
                <li>Sub Item 3</li>
            </ul>
        </li>
    </ul>
    <div id="popup">
        <ul id="context">
            <li>
                Item 1
                <ul>
                    <li>Sub Item 1</li>
                    <li>Sub Item 2</li>
                    <li>Sub Item 3</li>
                </ul>
            </li>
            <li>
                Item 2
                <ul>
                    <li>Sub Item 1</li>
                    <li>Sub Item 2</li>
                    <li>Sub Item 3</li>
                </ul>
            </li>
            <li>
                Item 3
                <ul>
                    <li>Sub Item 1</li>
                    <li>Sub Item 2</li>
                    <li>Sub Item 3</li>
                </ul>
            </li>
        </ul>
    </div>
    <script type="text/javascript">
        //var menu = $("#context").kendoContextMenu({ target: "#target" }).data("kendoContextMenu");

        //menu.show(20, 20);
        var target = $("#target"),
            menu = $("#context")
                        .addClass("k-context-menu")
                        .kendoMenu({ orientation: "vertical" })
                        .data("kendoMenu"),
            popup = $("#popup").kendoPopup({
                anchor: target,
                collision: "fit flip"
            }).data("kendoPopup"),
            tree = target.kendoTreeView().data("kendoTreeView");

        target.on("contextmenu", ".k-in", function (e) {
            tree.select($(e.target).closest(".k-item"));
            popup.options.anchor = e.target;
            popup.wrapper.hide();
            popup.open(e.pageX, e.pageY);
            e.preventDefault();
            e.stopPropagation();
        });

    </script>
</body>
</html>
