<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8"/>
    <title>Rendering</title>
    <script src="../../src/jquery.js"></script>
    <script src="../../src/kendo.core.js"></script>
    <script src="../../src/kendo.data.js"></script>
    <script src="../../src/kendo.popup.js"></script>
    <script src="../../src/kendo.list.js"></script>
    <script src="../../src/kendo.dataviz.core.js"></script>
    <script src="../../src/kendo.data.js"></script>
    <script src="../../src/kendo.draganddrop.js"></script>
    <script src="../../src/kendo.slider.js"></script>
    <script src="../../src/kendo.resizable.js"></script>
    <script src="../../src/kendo.userevents.js"></script>
    <script src="../../src/kendo.fx.js"></script>
    <script src="../../src/kendo.mobile.scroller.js"></script>

    <script src="../../src/kendo.dataviz.core.js"></script>
    <script src="../../src/dataviz/util.js"></script>
    <script src="../../src/dataviz/text-metrics.js"></script>
    <script src="../../src/dataviz/geometry.js"></script>
    <script src="../../src/dataviz/drawing/core.js"></script>
    <script src="../../src/dataviz/drawing/mixins.js"></script>
    <script src="../../src/dataviz/drawing/shapes.js"></script>
    <script src="../../src/dataviz/drawing/parser.js"></script>
    <script src="../../src/dataviz/drawing/svg.js"></script>
    <script src="../../src/dataviz/drawing/vml.js"></script>
    <script src="../../src/kendo.dataviz.themes.js"></script>

    <script src="../../src/dataviz/diagram/utils.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/math.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/svg.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/services.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/extensions.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/dom.js" type="text/javascript"></script>
    <script src="../../src/dataviz/diagram/layout.js" type="text/javascript"></script>
</head>
<body>
<style>
.k-diagram .k-layer {
  position: absolute;
  left: 0;
  top: 0;
}

.k-diagram {
  height: 600px;
}
.k-diagram .km-scroll-wrapper {
  padding-bottom: 0;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}
.k-diagram .km-scroll-wrapper,
.k-diagram .km-scroll-container {
  position: absolute;
  width: 100%;
  height: 100%;
}

.k-diagram .km-touch-scrollbar {
  display: none;
}
</style>
<span style="font:12px sans-serif;">Kendo</span>
<div id="canvas" style="border:1px solid black;width: 800px; height: 800px;"></div>
<script>
    var dataviz = kendo.dataviz;
    var diagram = dataviz.diagram;

    $("#canvas").kendoDiagram({
        dataSource: [{
            "name" : "Telerik",
            "items": [
                {"name": "Kendo"},
                {"name": "Icenium"}
            ]
        }],     
        layout:{
            type: "tree",
            subtype: "right"
        },
        shapeDefaults: {         
            // type: "image",
            // source: "http://demos.telerik.com/kendo-ui/content/web/foods/1.jpg"
            visual: visual,
            //type: "circle"
        },
        connectionDefaults: {
            stroke: {
                color: "#979797",
                width: 2
            },
            startCap: "FilledCircle",
            endCap: "ArrowEnd"
        }
    });
    var diagram = $("#canvas").data("kendoDiagram");
     var shape = new kendo.dataviz.diagram.Shape({x: 900, y:100, fill: "red"});
     diagram.addShape(shape);
    diagram.bringIntoView([shape]);
    
    function visual(options) {

        var g = new diagram.Group({
            //autoSize: true
        });

        var r = new diagram.Path({
            data: "M7.115,16C3.186,16,0,12.814,0,8.885C0,5.3,2.65,2.336,6.099,1.843V0l4.85,2.801l-4.85,2.8V3.758 c-2.399,0.473-4.21,2.588-4.21,5.126c0,2.886,2.34,5.226,5.226,5.226s5.226-2.34,5.226-5.226c0-1.351-0.513-2.582-1.354-3.51 l1.664-0.961c0.988,1.222,1.581,2.777,1.581,4.472C14.23,12.814,11.045,16,7.115,16L7.115,16z",
            width: 100,
            height: 100,
            fill: "LimeGreen",
            stroke: {
                color: "none"
            }
        });
        g.append(r);
        var line = new diagram.Polyline({
            points: [{x: 10, y: 10}, {x: 50, y: 50}, {x: 100, y: 30}],
            from: {x: 10, y: 10},
            to: {x: 100, y: 90},
            startCap: "FilledCircle",
            endCap: "ArrowEnd"
        });
        //g.append(line);
        var fn = new diagram.TextBlock({
            text: options.dataItem.name,
            fontSize: 16,
            width: 100,
            height: 100,
            //autoSize: false,
            x: 0,
            y: 0
        });
        g.append(fn);
        return g;
    }
</script>
</body>
</html>