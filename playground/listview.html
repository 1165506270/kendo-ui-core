<!DOCTYPE html>
<html>
    <head>
        <title>listview</title>
        <script src="../src/jquery.js"></script>
        <script src="../src/kendo.core.js"></script>
        <script src="../src/kendo.data.js"></script>
        <script src="../src/kendo.binder.js"></script>
        <script src="../src/kendo.pager.js"></script>
        <script src="../src/kendo.selectable.js"></script>
        <script src="../src/kendo.validator.js"></script>
        <script src="../src/kendo.editable.js"></script>
        <script src="../src/kendo.listView.js"></script>
        <link href="../styles/kendo.common.css" type="text/css"/>
        <link href="../styles/web/kendo.default.less" type="text/css" rel="stylesheet/less"/>
        <script src="../demos/mvc/content/shared/js/less.js"></script>

        <style type="text/css">
            .k-marquee
            {
                position:absolute;
                border:1px dotted black;
                background: rgba(200, 200, 255, 0.7);
                border: 1px solid rgba(100, 100, 255, 0.8);
            }
            .k-state-focused
            {
                background: #C8E844;
            }
            ul{
                margin:0;
                padding:0;
                width: 200px;
            }
            li
            {
                border: 1px solid black;
                list-style:none;
                background-color: #EFDFEF;
            }
            li:nth-child(2n+1)
            {
                background-color: #BAEAEA;
            }
       </style>
    </head>
    <body>
        <ul id="listView"></ul>
        <div class="pager"></div>

        <script id="editTemplate" type="text/x-kendo-tmpl">
            <li>Editing: <input type="text" data-value="foo" name="foo" required/><div><span data-for="foo"></span></div>
            <input type="number" data-value="id" name="id" min="1"/>
            <button class='k-close-button'>Close</button></li>
        </script>

        <script>
            $(document).ready(function() {
                var data = [];
                for (var i = 1; i <= 20; i++ ) {
                    data.push( { id: i, foo: "foo" + i, bar: "bar" + i, baz: { foo: "baz.foo" + i } } );
                }
                var dataSource = new kendo.data.DataSource({
                    schema: {
                        model: {
                            id: "id",
                            fields: {
                                id: { type: "number" },
                                foo: "foo"
                            }
                        }
                    },
                    data: data,
                    pageSize: 10
                });

                $("<table><tbody></tbody></table>").appendTo(document.body).kendoListView({
                    dataSource: dataSource,
                    selectable: true,
                    template: "<tr><td>${id}</td><td>${foo}</td></tr>"
                });

                $(".pager").kendoPager({
                    dataSource: dataSource,
                    selectTemplate: '<span class="currentPage">#=text#</span>',
                    linkTemplate: '<a href="##" data-page="#=idx #">#=text#</a>'
                });

                var listView = $("#listView").kendoListView({
                    dataSource: dataSource,
                    selectable: false,
                    navigatable: true,
                    template: "<li>#=foo# <button class='k-edit-button'>Edit</button><button class='k-delete-button'>Delete</button></li>",
                    editTemplate: kendo.template($("#editTemplate").html())
                }).delegate(".k-edit-button", "click", function(e) {
                    var item = $(this).parent();

                    listView.editItem(item);

                }).delegate(".k-close-button", "click", function(e) {
                    var item = $(this).parent();

                    listView.closeItem(item);

                }).delegate(".k-delete-button", "click", function(e) {
                    var item = $(this).parent();

                    if (confirm("Delete?")) {
                        listView.removeItem(item);
                    }
                }).data("kendoListView");
            });
        </script>
    </body>
</html>
