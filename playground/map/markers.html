<!DOCTYPE html>
<html>
<head>
    <title>Map sandbox</title>
    <meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <script src="../../src/jquery.js"></script>
    <script src="../../src/kendo.core.js"></script>
    <script src="../../src/kendo.fx.js"></script>
    <script src="../../src/kendo.userevents.js"></script>
    <script src="../../src/kendo.draganddrop.js"></script>
    <script src="../../src/kendo.popup.js"></script>
    <script src="../../src/kendo.tooltip.js"></script>
    <script src="../../src/kendo.mobile.scroller.js"></script>
    <script src="../../src/kendo.data.js"></script>
    <script src="../../src/kendo.dataviz.core.js"></script>
    <script src="../../src/dataviz/util.js"></script>
    <script src="../../src/dataviz/geometry.js"></script>
    <script src="../../src/dataviz/drawing/core.js"></script>
    <script src="../../src/dataviz/drawing/shapes.js"></script>
    <script src="../../src/dataviz/drawing/svg.js"></script>
    <script src="../../src/dataviz/drawing/canvas.js"></script>
    <script src="../../src/map/location.js"></script>
    <script src="../../src/map/crs.js"></script>
    <script src="../../src/map/layers/shape.js"></script>
    <script src="../../src/map/layers/marker.js"></script>
    <script src="../../src/map/layers/tile.js"></script>
    <script src="../../src/map/compass.js"></script>
    <script src="../../src/map/main.js"></script>
    <script src="chroma.min.js"></script>
    <link rel="stylesheet" href="../../styles/web/kendo.common.css">
    <link rel="stylesheet" href="../../styles/web/kendo.default.css">
    <link rel="stylesheet" href="../../styles/dataviz/kendo.dataviz.css">
    <link rel="stylesheet" href="../../styles/dataviz/kendo.dataviz.default.css">
    <style>
        html, body, #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        var scale = chroma
            .scale(["white", "green"])
            .domain([1, 1000]);

        function setColor(shape, users) {
            if (shape.children) {
                for (var i = 0; i < shape.children.length; i++) {
                    setColor(shape.children[i], users);
                }
            } else if (shape.options) {
                var color = scale(users).hex();
                shape.fill(color);
            }
        }

        $("#map").kendoMap({
            center: [51, 0],
            zoom: 1,
            controls: {
                navigator: true, // boolean, object
                navigator: {
                    position: "topLeft" // "topRight", "bottomLeft", "bottomRight"
                },
                zoom: true, // boolean, object
                scale: true, // boolean, object
                birdsEyeView: true // miniMap? boolean, object
            },
            theme: "default",
            layers: [{
                    type: "tile",
                    urlTemplate: "http://tile.openstreetmap.org/#= zoom #/#= x #/#= y #.png",
                    copyright: "&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors"
            }, {
                dataSource: {
                    type: "geojson",
                    transport: {
                        read: "cat.geo.json"
                    }
                },
                copyright: "&copy; FooBar"
            }],
            markers: [{
                location: [51.5, -0.09],
                tooltip: {
                    template: "London (#= location.toString() #)"
                }
            }],
            // Events,
            // TODO: Remove
            markerHover: $.noop,
            shapeCreated: function(e) {
                var color = e.shape.dataItem.properties.color;
                if (color) {
                    e.shape.fill(color, 0.2);
                }
            }
        });

        var map = $("#map").data("kendoMap");
    </script>
</body>
</html>

