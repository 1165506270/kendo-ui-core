<!DOCTYPE html>
<html>
    <head>
        <title>Map sandbox</title>
        <script src="../../src/jquery.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.fx.js"></script>
        <script src="../../src/kendo.userevents.js"></script>
        <script src="../../src/kendo.draganddrop.js"></script>
        <script src="../../src/kendo.mobile.scroller.js"></script>
        <script src="../../src/kendo.data.js"></script>
        <script src="../../src/kendo.dataviz.core.js"></script>
        <script src="../../src/kendo.dataviz.vml.js"></script>
        <script src="../../src/kendo.dataviz.svg.js"></script>
        <script src="../../src/kendo.dataviz.canvas.js"></script>
        <script src="../../src/kendo.dataviz.map.js"></script>
        <style>
            #view {
                width: 600px;
                height: 400px;
            }

            #tile-layer {
                position: relative;
            }

            .tile {
                position: absolute;
                user-select: none;
                -moz-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
            }

            .km-scroll-wrapper {
                position: relative;
            }

            .km-scroll-container {
                position: absolute;
            }
        </style>
    </head>
    <body>
        <div id="view">
            <div id="tile-layer">
            </div>
        </div>
        <script id="tile-template" type="text/x-kendo-template">
            <img class="tile" src="#= img #"
                 unselectable="on"
                 style="left: #= left #px; top: #= top #px;"></img>
        </script>
        <script>
            var tileTemplate = kendo.template($("#tile-template").html());
            var imgTemplate = kendo.template("tiles/#= zoom #/#= x #/#= y #.png");
            var tileSize = 256;

            function loadTiles(element, zoom) {
                element.empty();

                var size = Math.pow(2, zoom);
                for (var x = 0; x < size; x++) {
                    for (var y = 0; y < size; y++) {
                        var img = imgTemplate({ zoom: zoom, x: x, y: y });

                        $($.trim(tileTemplate({
                            img: img,
                            tileSize: tileSize,
                            left: x * tileSize,
                            top: y * tileSize
                        })))
                        .appendTo(element);
                    }
                }
            }

            loadTiles($("#tile-layer"), 3);

            $("#view").kendoMobileScroller({
                scroll: function(e) {
                },

                scrollEnd: function(e) {
                }
            });

            var scroller = $("#view").data("kendoMobileScroller");
            scroller.dimensions.y.makeVirtual();
            scroller.dimensions.x.makeVirtual();
            scroller.dimensions.x.virtualSize(0, 100000);
            scroller.dimensions.y.virtualSize(0, 100000);
        </script>
    </body>
</html>

