<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Scrollview</title>
        <link rel="stylesheet/less" href="../../styles/mobile/kendo.mobile.ios.less">
        <script src="../../demos/mvc/content/shared/js/less.js"></script>
        <script src="../../src/jquery.min.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.userevents.js"></script>
        <script src="../../src/kendo.router.js"></script>
        <script src="../../src/kendo.data.js"></script>
        <script src="../../src/kendo.fx.js"></script>
        <script src="../../src/kendo.draganddrop.js"></script>
        <script src="../../src/kendo.mobile.scroller.js"></script>
        <script src="../../src/kendo.mobile.loader.js"></script>
        <script src="../../src/kendo.mobile.view.js"></script>
        <script src="../../src/kendo.mobile.pane.js"></script>
        <script src="../../src/kendo.mobile.navbar.js"></script>
        <script src="../../src/kendo.mobile.button.js"></script>
        <script src="../../src/kendo.mobile.application.js"></script>
        <script src="../../src/kendo.mobile.listview.js"></script>
    </head>
    <body>

<div data-role="view" data-show="rebindListView" id="hierarchical-view" data-transition="slide">
    <ul id="hierarchical-listview" data-role="listview" data-template="hierarchicalMobileListViewTemplate"></ul>
</div>

<script id="hierarchicalMobileListViewTemplate" type="text/x-kendo-template">
    # if (data.HasEmployees) { #
        <a href="\#hierarchical-view?parent=#: data.uid #">#: FullName #</a>
    # } else { #
    #: FullName #
    # } #
</script>

    <script>
        var serviceRoot = "http://demos.kendoui.com/service";

        var employees = new kendo.data.HierarchicalDataSource({
            transport: {
                read: {
                    url: serviceRoot + "/Employees",
                    dataType: "jsonp"
                }
            },

            schema: {
                model: {
                    id: "EmployeeId",
                    hasChildren: "HasEmployees"
                }
            }
        });

        function rebindListView(e) {
            var parentID = e.view.params.parent,
            ds = employees;

            if (parentID) {
                var ds = employees.getByUid(parentID).children;
            }

            e.view.element.find("#hierarchical-listview").data('kendoMobileListView').setDataSource(ds);
        }

        new kendo.mobile.Application();
    </script>

    </body>
</html>
