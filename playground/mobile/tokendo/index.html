<!DOCTYPE html>
<html class="k-ios">
<head>
    <meta charset="utf-8">
    <title>ToKenDo</title>

    <!-- Weinre Proxy, configure to your machine if you have it. -->  
    <!--<script src="http://bundev.telerik.com:8888/target/target-script-min.js"></script>-->
     
    <link rel="stylesheet/less" type="text/css" href="layout.less" />
    <link rel="stylesheet" href="scroll-container.css" />
    <link rel="stylesheet" href="tokendo.css" />

    <script src="../examples/less.js"></script>
    <script src="../../../src/jquery.js"></script>
    <script src="../../../src/kendo.core.js"></script>
    <script src="../../../src/kendo.fx.js"></script>
    <script src="../../../src/kendo.data.js"></script>
    <script src="../../../src/kendo.scroller.js"></script>
    <script src="../../../src/kendo.mobile.list.js"></script>
    <script src="../../../src/kendo.mobile.view.js"></script>
    <script src="../../../src/kendo.mobile.application.js"></script>

</head>
<body>
    <div class="k-view">
        <div class="k-header">
            <div class="k-toolbar">
                <button class="k-button"><span class="k-text">Button 1</span></button>
                <button class="k-button"><span class="k-text">Button 2</span></button>
                <button class="k-button"><span class="k-text">Button 3</span><span class="k-message">12</span></button>
            </div>
        </div>
        <script type="text/html" id="item_tmpl">
            <ul class="list">
            <# for (var i = 0; i < data.length; i++) {
                var item = data[i]; #>
                <li class="item">
                    <label for="isdone_<#= i #>" <#= (item.done ? " class='input-checked'" : "") #>>
                        <input type="checkbox" id="isdone_<#= i #>" <#= (item.done ? " checked='checked'" : "") #> />
                        <#= item.title #>
                        <a href="#" class="more-details">More...</a>
                    </label>
                </li>
            <# } #>
            </ul>
        </script>

        <div id="content" class="k-content"></div>

        <div class="k-footer">
            <div class="k-tabStrip">
                <button class="k-button k-active">
                    <span class="k-icon"></span><span class="k-text">Featured</span>
                </button>
                <button class="k-button">
                    <span class="k-icon"></span><span class="k-text">Genius</span><span class="k-message">3</span>
                </button>
                <button class="k-button">
                    <span class="k-icon"></span><span class="k-text">Top Charts</span>
                </button>
                <button class="k-button">
                    <span class="k-icon"></span><span class="k-text">Categories</span>
                </button>
            </div>
        </div>

        <script>
            kendo.mobile.init({});

            $('label').live('click', function(e) {
                var element = $(this);
                element.toggleClass('input-checked', document.getElementById(element.attr('for')).checked);
            });

            var dataSource = new kendo.data.DataSource({
                page: 1,
                pageSize: 20,
                transport: {
                    read: {
                        url: "tokendo.data.js",
                        cache: true,
                        dataType: "jsonp",
                        jsonpCallback: "loadTodoItems"
                    }
                },
                reader: {
                    data: function(result) {
                        return result;
                    },
                    total: function(result) {
                        return result;
                    }
                }
            });

            dataSource.bind("change", function() {
                var data = dataSource.view();
                var template = kendo.template(document.getElementById("item_tmpl").innerHTML);

                $("#content").html(template({ data: data }))
                    .delegate('.more-details', 'click', function() {
                        var todoItemId = $(this).index();
                        kendo.mobile.switchView("edit.html");
                    });
            });

            dataSource.read();

            var application = new Application();
            application.addView($(".k-view").kendoView().data("kendoView"));
        </script>
    </div>
</body>
</html>

