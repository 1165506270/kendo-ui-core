<!DOCTYPE html>
<html>
<head>
    <link href="../../styles/web/kendo.common.css" rel="stylesheet" />
    <link href="../../styles/web/kendo.default.less" rel="stylesheet/less" />
    <link href="../../styles/mobile/kendo.mobile.all.less" rel="stylesheet/less" />
    <script src="../../demos/mvc/content/shared/js/less.js"></script>

    <script src="../../src/jquery.js"></script>
    
    <script src="../../src/kendo.core.js"></script>
    <script src="../../src/kendo.userevents.js"></script>
    <script src="../../src/kendo.data.js"></script>
    <script src="../../src/kendo.router.js"></script>
    <script src="../../src/kendo.fx.js"></script>
    <script src="../../src/kendo.draganddrop.js"></script>
    <script src="../../src/kendo.mobile.scroller.js"></script>
    <script src="../../src/kendo.mobile.view.js"></script>
    <script src="../../src/kendo.mobile.loader.js"></script>
    <script src="../../src/kendo.mobile.pane.js"></script>
    <script src="../../src/kendo.mobile.application.js"></script>
    <script src="../../src/kendo.mobile.navbar.js"></script>
    <script src="../../src/kendo.mobile.scrollview.js"></script>
    <script src="../../src/kendo.touch.js"></script>

    <script src="http://demos.kendoui.com/content/spa/aeroviewr/js/500px.js"></script>

    <style>
        .km-virtual-scrollview {
            overflow-x: hidden;
            white-space: nowrap;
            width: 100%;
            position: relative;

            display: flex;
            display: -webkit-flex;
            display: -webkit-box;
        }

        .km-virtual-scrollview > div {
            position: relative;
            flex: 1;
            -webkit-flex: 1;
            -webkit-box-flex: 1;
        }

        .virtual-page {
            min-height: 1px;
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: inline-block;
        }

        .tile {
            width: 50%;
            height: 33%;
            background-color: #c5c5c5;
            display: inline-block;
            float: left;
            box-sizing: border-box;
            -webkit-box-sizing: border-box;
            border: 1px solid #000;
        }

        .item-img {
            height: 100%;
            background-repeat: no-repeat;
            background-position: center center;
            background-size: cover;
        }

    </style>
</head>
<body>

    <div id="home" data-role="view" data-title="Canvas View">
        <header data-role="header">
            <div data-role="navbar">
                <span data-role="view-title"></span>
            </div>
        </header>
        <div id="virtual" 
            data-role="scrollview" 
            data-source="ds" 
            data-template="tmp"
            data-empty-template="tmp-empty"
            data-content-height="300"
            data-batch-size="6">
        </div>
    </div>

    <script id="tmp" type="text/x-kendo-template">
        <div data-uid="#: data[0].uid #" data-offset="#: calculateOffset(data[0]) #" class="tile">
            #= data[0].foo #
        </div>
        <div data-uid="#: data[1].uid #" data-offset="#: calculateOffset(data[1]) #" class="tile">
            #= data[1].foo #
        </div>
        <div data-uid="#: data[2].uid #" data-offset="#: calculateOffset(data[2]) #" class="tile">
            #= data[2].foo #
        </div>
        <div data-uid="#: data[3].uid #" data-offset="#: calculateOffset(data[3]) #" class="tile">
            #= data[3].foo #
        </div>
        <div data-uid="#: data[4].uid #" data-offset="#: calculateOffset(data[4]) #" class="tile">
            #= data[4].foo #
        </div>
        <div data-uid="#: data[5].uid #" data-offset="#: calculateOffset(data[5]) #" class="tile">
            #= data[5].foo #
        </div>
    </script>

    <script id="tmp-empty" type="text/x-kendo-template">
        <div class="empty-page"></div>
    </script>

    <script>
        var app = new kendo.mobile.Application();

        var ds = new kendo.data.DataSource({
            transport: {
                read: function(options) {

                    var results = [], data = options.data, o = options;
                    for (var i = data.skip; i < data.skip + data.take; i ++) {
                        results.push({ foo: i });
                    }
                    setTimeout(function() {
                        o.success(results);
                    }, 1200);
                }
            },
            pageSize: 36,
            serverPaging: true,
            schema: {
                total: function() { return 100000; }
            }
        });

        function calculateOffset(dataItem) {
            return undefined;
        }
    </script>

    <style>

    .virtual-page {
        min-height: 1px;
        height: 100%;
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: inline-block;
    }

    .tile {
        width: 50%;
        height: 33%;
        background-color: #c5c5c5;
        display: inline-block;
        float: left;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        border: 1px solid #000;
        overflow: hidden;
    }

    .empty-page {
        height: 100%;
        width: 100%;
        background-color: #FF0000;
    }
    </style>

</body>
</html>
