<!DOCTYPE html>
<html>
    <head>
        <title>MVVM</title>
        <link rel="stylesheet" href="../styles/web/kendo.common.css"/>
        <link rel="stylesheet/less" type="text/css" href="../styles/web/kendo.default.less"/>

        <script src="../demos/mvc/content/shared/js/less.js"></script>

        <script src="../src/jquery.js"></script>
        <script src="../src/kendo.core.js"></script>
        <script src="../src/kendo.data.js"></script>
        <script src="../src/kendo.binder.js"></script>

    </head>
    <body>
        <div>
            <h1 data-bind="text: name"></h1>
            <h2 data-bind="text: currentSection.name"></h2>
            <h3 data-bind="text: activeSection().name"></h3>
            <button data-bind="click:nextSection">Next Section</button>
        </div>
        <p style="margin-top:50px;display:block;">
            PROBLEM: Why doesn't the first "Section 1" change when "Next Section" is clicked?
            </p>
        <script>
var vm = {
    _idx: 0,
    name: "Test Top Level",
    currentSection: null,
    activeSection: function(){
      return this.sections[this.get("_idx")];
    },
    sections: [
        { name: "Section 1"},
        { name: "Section 2"}
    ],
    nextSection: function(){
       if(this._idx >= this.sections.length - 1) return;

       console.log("START", this.currentSection);

       this.set("_idx", this._idx + 1);
       this.set("currentSection", this.sections[this._idx]);

       console.log("END", this.currentSection);
    }
};

vm = kendo.observable(vm);
vm.currentSection = vm.sections[0];

kendo.bind(document.body.children, vm);
        </script>
    </body>
</html>

