<!DOCTYPE html>
<html>
    <head>
        <title>kendo number formatting</title>
        <script src="../../src/jquery.js"></script>
        <script src="../qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/formatting.js"></script>
        <link rel="stylesheet" href="../qunit.css" />
    </head>
    <body>
        <h1 id="qunit-header">kendo number formatting</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>
        <div id="qunit-fixture">test markup, will be hidden</div>
        <ul id="log"></ul>

        <script>
            var format = window.numberFormat;

            test("format should return empty string if no number", function() {
                equal(format(), "");
            });

            test("if not format should return number.toString()", function() {
                equal(format(10.1), "10.1");
            });

            //positive custom format
            test("replace format with whole part of the number", function() {
                equal(format(10.1, "$ #"), "$ 10");
            });

            test("replace # after 0 with 0", function() {
                equal(format(10.1, "$ #0####"), "$ 00010");
            });

            test("remove # from format after replace", function() {
                equal(format(10.1, "$ ####"), "$ 10");
            });

            test("apply thousand separator if ','", function() {
                equal(format(1000.1, "$ ##,##"), "$ 1,000"); //use globalization thousand separator count
            });

            test("do not apply thousand separator if no enough digits", function() {
                equal(format(10, "$ ##,##"), "$ 10"); //use globalization thousand separator count
            });

            test("replace number in decimal part", function() {
                equal(format(10.1, "####.#"), "10.1");
            });

            test("replace # before 0 with 0 in decimal part", function() {
                equal(format(10.1, "####.####0#"), "10.10000");
            });

            test("replace # from decimal part", function() {
                equal(format(10.1, "####.####"), "10.1");
            });

            test("replace # from decimal part", function() {
                equal(format(10.1, "####.####"), "10.1");
            });

            test("integer if no 0 in decimal part of the format", function() {
                equal(format(10, "####.#"), "10");
            });

            test("negative integer if no 0 in decimal part of the format", function() {
                equal(format(-10, "####.#"), "-10");
            });

            test("decimal if 0 in the decimal part of format", function() {

                equal(format(10, "####.#0#"), "10.00");
            });

            test("one digit after decimal point", function() {
                equal(format(10, "####.0"), "10.0");
            });

            test("round number if last sigh in the format is 0", function() {
                equal(format(10.99, "####.0"), "11.0");
            });

            test("format decimal number 0.001", function() {
                equal(format(0.001, "####.#0#"), "0.001");
            });

            test("format decimal number -0.001", function() {
                equal(format(-0.001, "####.#0#"), "-0.001");
            });

            test("custom format with literals", function() {
                equal(format(10.1, "'EFD' #"), "'EFD' 10");
            });

            test("custom format with %", function() {
                equal(format(10.1, "# %"), "1010 %");
            });

            //negative custom format
            test("format decimal number -0.001", function() {
                equal(format(-0.001, "####;-(#.#)"), "-(0.001)");
            });

            test("format decimal number -123", function() {
                equal(format(-123, "####;-(#.00)"), "-(123.00)");
            });

            //zero custom format
            test("format decimal number 0", function() {
                equal(format(0, "####;-(#.#);ZERO"), "ZERO");
            });

            test("format with #.00 zero number", function() {
                equal(format(0, "####;-(#.00);#.00"), "0.00");
            });

            //exponential
            test("format number with 'e' format", function() {
                var number = 123;
                equal(format(number, "e"), number.toExponential());
            });

            test("format number with 'e10' format", function() {
                var number = 123;
                equal(format(number, "e10"), number.toExponential(10));
            });

            test("format 123.123 with 'e' format", function() {
                var number = 123;
                equal(format(number, "e10"), number.toExponential(10));
            });

            test("format one digit number with 'e' format", function() {
                var number = 1;
                equal(format(number, "e"), number.toExponential());
            });

            test("format 0 with 'e' format", function() {
                var number = 0;
                equal(format(number, "e"), number.toExponential());
            });

            test("format 0.001 with 'e' format", function() {
                var number = 0.001;
                equal(format(number, "e"), number.toExponential());
            });

            test("format 0.0012 with 'e' format", function() {
                var number = 0.0012;
                equal(format(number, "e"), number.toExponential());
            });

            test("format 0.01243 with 'e' format", function() {
                var number = 0.01243;
                equal(format(number, "e"), number.toExponential());
            });

            test("format 0.01243 with 'e5' format", function() {
                var number = 0.01243;
                equal(format(number, "e5"), number.toExponential(5));
            });

            test("format 0.010043 with 'e5' format", function() {
                var number = 0.010043;
                equal(format(number, "e5"), number.toExponential(5));
            });

            //standard formats
            test("N format big positive integer", function() {
                var number = 10000;
                equal(format(number, "N"), "10,000.00");
            });

            test("N format big negative integer", function() {
                var number = -10000;
                equal(format(number, "N"), "-10,000.00");
            });

            test("N format small positive integer", function() {
                var number = 10;
                equal(format(number, "N"), "10.00");
            });

            test("N format small negative integer", function() {
                var number = -10;
                equal(format(number, "N"), "-10.00");
            });

            test("N3 format", function() {
                var number = 10.3337;
                equal(format(number, "N3"), "10.334");
            });

            test("N0 format", function() {
                var number = 10.3337;
                equal(format(number, "N0"), "10");
            });

            test("C format", function() {
                var number = 10.3337;
                equal(format(number, "C"), "$10.33");
            });

            test("C0 format", function() {
                var number = 10.3337;
                equal(format(number, "C0"), "$10");
            });

            test("C3 negative format", function() {
                var number = -10.3337;
                equal(format(number, "C3"), "($10.334)");
            });


      </script>
    </body>
</html>
