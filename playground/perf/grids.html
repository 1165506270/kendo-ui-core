<!DOCTYPE html>
<html>
    <head>
        <title>Grid performance comparison - binding to 100 records</title>
        <script src="../../src/jquery.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.query.js"></script>
        <script src="../../src/kendo.datasource.js"></script>
        <script src="../../src/kendo.navigatable.js"></script>
        <script src="../../src/kendo.grid.js"></script>
        <script src="benchmark.js"></script>
        <script src="http://dev.sencha.com/deploy/ext-4.0.0/ext-all.js"></script>
        <script src="http://brado23.github.com/jquery-ui/grid-datamodel2/jquery.tmpl.js"></script>

        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/ui/jquery.ui.core.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/ui/jquery.ui.widget.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/ui/jquery.ui.mouse.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/grid-spf/datasource.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/grid-spf/grid.js"></script>
        <script src="http://www.trirand.com/blog/jqgrid/js/jquery.jqGrid.min.js"></script>
        <script src="http://wijmo.com/Wijmo-Complete/external/jquery.glob.min.js"></script>
        <script src="http://wijmo.com/Wijmo-Complete/wijmo/jquery.wijmo.wijdatasource.js"></script>
        <script src="http://wijmo.com/Wijmo-Complete/wijmo/jquery.wijmo.wijgrid.js"></script>
        <script src="http://labs.infragistics.com/aspnet-mvc/Scripts/ig.util.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/grid-spf/observable/jquery.observable.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/grid-spf/observable/jquery.render.js"></script>
        <script src="https://github.com/BorisMoore/jquery-ui/raw/grid/grid-spf/observable/jquery.views.js"></script>
        <script src="http://labs.infragistics.com/aspnet-mvc/Scripts/ig.dataSource.js"></script>
        <script src="http://labs.infragistics.com/aspnet-mvc/Scripts/ig.ui.shared.js"></script>
        <script src="http://labs.infragistics.com/aspnet-mvc/Scripts/ig.ui.grid.framework.js"></script>

        <style>
            table
            {
                border: 1px solid black;
                border-collapse: collapse;
            }
            table td,
            table th
            {
                border: 1px solid black;
                padding: 3px;
            }
            div.grid
            {
                height: 200px;
                overflow: auto;
                border: 1px solid black;
                margin: 10px;
                padding: 10px;
            }
        </style>
    </head>
    <body>
        <p>Running benchmark ... </p>
        <div class="grid">
            <div>Kendo Grid bound to 100 records</div>
            <table class="kendo">
                <thead>
                    <tr>
                        <th data-field="CustomerID">Customer ID</th>
                        <th data-field="CustomerName">Customer Name</th>
                        <th data-field="Birthday">Birthday</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="grid">
            <div>Wijmo Grid bound to 100 records</div>
            <table id="wijmo">
                <thead>
                    <tr>
                        <th>Customer ID</th>
                        <th>Customer Name</th>
                        <th>Birthday</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="grid">
            <div>Infragistics Grid bound to 100 records</div>
            <table id="ig">
                <thead>
                    <tr>
                        <th>Customer ID</th>
                        <th>Customer Name</th>
                        <th>Birthday</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
      <div class="grid">
            <div>ExtJS 4 Beta 2 Grid bound to 100 records</div>
            <div id="extjs">
            </div>
        </div>
        <div class="grid">
            <div>jQuery UI Grid bound to 100 records</div>
            <table class="jquery">
                <thead>
                    <tr>
                        <th data-field="CustomerID">Customer ID</th>
                        <th data-field="CustomerName">Customer Name</th>
                        <th data-field="Birthday">Birthday</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div class="grid">
            <div>jqGrid bound to 100 records</div>
            <table id="jqgrid"></table>
        </div>
        <script>
            var records = [];

            for (var i = 1; i <= 100; i++) {
                records.push({ CustomerID: i, CustomerName: "Customer " + i, Birthday: new Date() });
            }
            Ext.regModel('Customer', {
                fields: [
                {name: 'CustomerID', type: "string"},
                {name: 'CustomerName', type: "string"},
                {name: 'Birthday', stype: "string"}
                ]
            });

            if ($.ui.datasource) {
                var dataSource = $.ui.datasource({
                    source: records
                });
            }
            var store = new Ext.data.Store({
                model: "Customer",
                data: records,
                autoLoad: true
            });

            $(document).ready(function() {
                var suite = new Benchmark.Suite;

                var kendoGrid = $("table.kendo").kendoGrid(records).data("kendoGrid");

                var extJsGrid = new Ext.grid.GridPanel({
                    store: store,
                    columns: [
                    {
                        text     : 'CustomerID',
                        dataIndex : "CustomerID"
                    },
                    {
                        text     : 'CustomerName',
                        dataIndex: 'CustomerName'
                    },
                    {
                        text     : 'Birthday',
                        dataIndex: 'Birthday'
                    }
                    ],
                    autoScroll: false,
                    height: 2100,
                    renderTo: 'extjs'
                });
                if ($.fn.grid) {
                var jqueryGrid = $("table.jquery").grid({ source: dataSource }).data("grid");
                jqueryGrid.refresh();
            }
                var jqGrid = $("#jqgrid").jqGrid({
                    datatype: "local",
                    scroll: false,
                    data: records,
                    rowNum: records.length,
                    colNames:['Customer ID','Customer Name', 'Birthday'],
                    colModel:[
                    {name:'CustomerID',index:'CustomerID'},
                    {name:'CustomerName',index:'CustomerName'},
                    {name:'Birthday',index:'Birthday'}
                    ],
                    height: 2100
                });

                var wijmoGrid = $("#wijmo").wijgrid({ data: records }).data("wijgrid");

                var igGrid = $("#ig").igGrid({
                    dataSource: records,
                    columns: [
                        { name: "Customer ID", dataKeyField: "CustomerID" },
                        { name: "Customer Name", dataKeyField: "CustomerName" },
                        { name: "Birthday", dataKeyField: "Birthday" },
                    ]
                }).data("igGrid");

                if ($.fn.grid) {
                    suite.add("jQuery UI Grid", function() {
                        debugger
                        jqueryGrid.refresh();
                    });
                }
                suite.add("Kendo Grid", function() {
                    kendoGrid.refresh();
                })
                .add("Wijmo Grid", function() {
                    wijmoGrid.doRefresh();
                })
                .add("Infragistics Grid", function() {
                    igGrid.dataBind();
                })
                .add("ExtJS Grid", function() {
                    store.loadData(records, false);
                })
                .add("jqGrid", function() {
                    jqGrid.trigger("reloadGrid");
                })
                .on("complete", function() {
                    var message = "User agent: " + navigator.userAgent;
                    message += "<table><tr><th>Position</th><th>Grid</th><th>Ops/sec (higher is better)</th></tr>";
                        var results = $.makeArray(this);
                        results.sort(function(a, b) { return b.hz - a.hz });
                        $.each(results, function(index) {
                            message += "<tr><td>" + (index + 1) + "</td><td>" + this.name + "</td><td>" + this.hz + "</td></tr>";
                        });
                        message += "</table>";
                    $("p:first").html(message);
                })
                .run(true);
            });
        </script>
    </body>
</html>
