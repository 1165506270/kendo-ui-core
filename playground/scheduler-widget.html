<!DOCTYPE HTML>
<html>
    <head>
        <title>Scheduler</title>
        <link href="../styles/web/kendo.common.min.css" rel="stylesheet" />
        <link href="../styles/web/kendo.silver.min.css" rel="stylesheet" />

        <script src="../src/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.core.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.timezones.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.fx.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.userevents.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.draganddrop.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.mobile.scroller.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.validator.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.window.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.data.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.list.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.dropdownlist.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.multiselect.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.binder.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.popup.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.tooltip.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.calendar.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.datepicker.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.timepicker.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.datetimepicker.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.list.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.dropdownlist.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.editable.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.scheduler.view.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.scheduler.dayview.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.scheduler.agendaview.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.scheduler.monthview.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.scheduler.recurrence.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.scheduler.js" type="text/javascript" charset="utf-8"></script>
        <script src="../src/kendo.numerictextbox.js" type="text/javascript" charset="utf-8"></script>
        <style>

            html
            {
	            font:12px sans-serif;
	            overflow-y:scroll;
            }

        </style>
    </head>
    <body>

    <div class="k-edit-form-container">
        <div class="k-edit-label"><label for="title">Title</label></div>
        <div data-container-for="title" class="k-edit-field">
            <input type="text" class="k-input k-textbox" name="title" required="required" data-bind="value:title">
        </div>
        <div id="recur"></div>
    </div>

        <div id="win">
            <div id="scheduler"></div>
        </div>

   <script>
        $("#recur").kendoRecurrenceEditor();

        /*$("#win").kendoWindow({
            visible: true,
            resize: function() {
                $("#scheduler").kendoScheduler("refresh");
            }
        });*/

        var start = new Date();
        start.setHours(3);

        var end = new Date(start);

        end.setHours(end.getHours() + 3);

        $("#scheduler").kendoScheduler({
            height: 800,
            // numberOfTimeSlots: 4,
//            startTime: new Date(2013, 4, 14, 11, 0,0),
            views: ["day", { name: "week", selected: true }, "month", "agenda"],
            resources: [
                {
                    field: "owner",
                    dataValueField: "OwnerID",
                    dataSource: [
                        { text: "Alex", OwnerID: 1, color: "red" },
                        { text: "Bob", OwnerID: 2, color: "green" },
                        { text: "Charlie", OwnerID: 3, color: "blue" }
                    ],
                    title: "Owner"
                }
            ],
            dataSource: {
                batch: true,
                transport: {
                    read: {
                        url: "http://korchev:8080/service/tasks",
                        dataType: "jsonp"
                    },
                    update: {
                        url: "http://korchev:8080/service/tasks/update",
                        dataType: "jsonp"
                    },
                    create: {
                        url: "http://korchev:8080/service/tasks/create",
                        dataType: "jsonp"
                    },
                    destroy: {
                        url: "http://korchev:8080/service/tasks/destroy",
                        dataType: "jsonp"
                    },
                    parameterMap: function(options, operation) {
                        if (operation !== "read" && options.models) {
                            return {models: kendo.stringify(options.models)};
                        }
                    }
                },
                schema: {
                    timezone: "Europe/London",
                    model: {
                        id: "ID",
                        fields: {
                            ID: { type: "number" },
                            title: { defaultValue: "eventTitle", field: "Title", validation: { required: true } },
                            start: { type: "date", field: "Start" },
                            end: { type: "date", field: "End" },
                            description: { field: "Description" },
                            recurrence: { field: "Recurrence" },
                            owner: { field: "Owner" },
                            isAllDay: { type: "boolean", field: "IsAllDay" }
                        }
                    }
                }
                /*data: [ {
                    start: start,
                    end: end,
                    title: "this is today"
                },{
                    start: new Date(2013, 4, 22, 3, 5,0),
                    end: new Date(2013, 4, 22, 6, 5,0),
                    title: "collision event 1"
                },{
                    start: new Date(2013, 4, 22, 3, 5,0),
                    end: new Date(2013, 4, 22, 6, 5,0),
                    title: "collision event 2"
                },{
                    start: new Date(2013, 4, 22, 3, 5,0),
                    end: new Date(2013, 4, 22, 6, 5,0),
                    title: "collision event 3"
                },{
                    start: new Date(2013, 4, 22, 2, 5,0),
                    end: new Date(2013, 4, 22, 2, 30,0),
                    title: "collision event 4"
                },{
                    start: new Date(2013, 4, 22, 19, 5,0),
                    end: new Date(2013, 4, 22, 19, 30,0),
                    title: "collision event 5"
                },{
                    start: new Date(2013, 4, 22, 3, 5,0),
                    end: new Date(2013, 4, 22, 12, 5,0),
                    title: "collision event 6"
                },{
                    start: new Date(2013, 4, 21, 10, 5,0),
                    end: new Date(2013, 4, 21, 12, 5,0),
                    title: "bar"
                },{
                    start: new Date(2013, 4, 25, 10, 5,0),
                    end: new Date(2013, 4, 25, 12, 5,0),
                    title: "the event at the end"
                },{
                    start: new Date(2013, 4, 22, 10, 5,0),
                    end: new Date(2013, 4, 22, 12, 5,0),
                    title: "collision event 7"
                },{
                    start: new Date(2013, 4, 22, 13, 5,0),
                    end: new Date(2013, 4, 22, 17, 5,0),
                    title: "collision event 8"
                },{
                    start: new Date(2013, 4, 22, 10, 5,0),
                    end: new Date(2013, 4, 22, 16, 5,0),
                    title: "collision event 9"
                },{
                    start: new Date(2013, 4, 22, 16, 5,0),
                    end: new Date(2013, 4, 22, 20, 5,0),
                    title: "collision event 10"
                },{
                    start: new Date(2013, 4, 10, 10, 5,0),
                    end: new Date(2013, 4, 19, 12, 5,0),
                    title: "multi day"
                },{
                    start: new Date(2013, 4, 20, 10, 5,0),
                    end: new Date(2013, 4, 20, 12, 5,0),
                    isAllDay: true,
                    title: "this is my all day event"
                },{
                    start: new Date(2013, 4, 22, 10, 5,0),
                    end: new Date(2013, 4, 23, 12, 5,0),
                    title: "overlapping multi day"
                },{
                    start: new Date(2013, 4, 23, 10, 5,0),
                    end: new Date(2013, 4, 24, 12, 5,0),
                    title: "second overlapping multi day"
                },{
                    start: new Date(2013, 4, 24, 10, 5,0),
                    end: new Date(2013, 4, 25, 12, 5,0),
                    title: "third overlapping multi day"
                }]*/
            }
        });
    </script>
    </body>
</html>
