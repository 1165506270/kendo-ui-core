<!DOCTYPE html>

<html>
<head>
    <title></title>
    <script src="../src/jquery.min.js"></script>
    <script src="../src/kendo.core.js"></script>
    <script src="../src/kendo.fx.js"></script>
    <script src="../src/kendo.draganddrop.js"></script>
    <script src="../src/kendo.userevents.js"></script>
    <script src="../src/kendo.router.js"></script>
    <script src="../src/kendo.data.js"></script>
    <script src="../src/kendo.binder.js"></script>
    <script src="../src/kendo.view.js"></script>
    <script src="../src/kendo.list.js"></script>
    <script src="../src/kendo.popup.js"></script>
    <script src="../src/kendo.dropdownlist.js"></script>
    <script src="../src/kendo.listview.js"></script>
    <link href="../styles/mobile/kendo.mobile.all.less" rel="stylesheet/less" type="text/css" />
    <script src="../demos/mvc/content/shared/js/less.js"></script>
</head>
<body>

  <div id="myRoot" class="container">
  </div>

  <script type="text/x-kendo-template" id="layout-template">
    <ul data-role="menu">
      <li><a href="#">Home</a></li>
      <li><a href="#/orders">Orders</a></li>
      <li><a href="#/products">Products</a></li>
    </ul>
    <div id="myContent"></div>
  </script>

  <script type="text/x-kendo-template" id="home-template">
    <h2>Home Page</h2>
  </script>

  <script type="text/x-kendo-template" id="orders-template">
    <h2>Orders Page</h2>
  </script>

  <script type="text/x-kendo-template" id="products-template">
    <h2>Products Page</h2>
  </script>

  <script>
      (function() {

          // Define layout
          var layout = new kendo.Layout("#layout-template");

          var canLeaveCallback = null;

          var canLeaveHome = function () {
              return true;
          };

          var canLeaveOrders = function () {
              return true;
          };

          var canLeaveProducts = function () {
              return false;
          };

          // Define Router
          var router = new kendo.Router({
              init: function () {
                  layout.render("#myRoot");
              },
              change: function (e) {
                  console.log("change event fired");

                  if (canLeaveCallback !== null && canLeaveCallback() !== true) {
                      e.preventDefault();
                      console.log("route cancelled");
                  }
              }
          });

          // Define Views
          var views = {
              home: new kendo.View('#home-template'),
              orders: new kendo.View('#orders-template'),
              products: new kendo.View('#products-template')
          };

          // Configure routes
          router.route('/', function() {
              layout.showIn('#myContent', views.home);
              canLeaveCallback = canLeaveHome;
          });

          router.route('/orders', function() {
              layout.showIn('#myContent', views.orders);
              canLeaveCallback = canLeaveOrders;
          });

          router.route('/products', function() {
              layout.showIn('#myContent', views.products);
              canLeaveCallback = canLeaveProducts;
          });

          router.start();

      }());
  </script>
</body>
</html>
