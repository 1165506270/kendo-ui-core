<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" >
        <title>Spline</title>
        <link href="../styles/dataviz/kendo.dataviz.css" rel="stylesheet" />
        <script src="../src/jquery.js"></script>
        <script src="../src/kendo.core.js"></script>
        <script src="../src/kendo.data.js"></script>
        <script src="../src/kendo.userevents.js"></script>
        <script src="../src/kendo.dataviz.core.js"></script>
        <script src="../src/kendo.dataviz.chart.js"></script>
        <script src="../src/kendo.dataviz.vml.js"></script>
        <script src="../src/kendo.dataviz.svg.js"></script>
        <script src="../src/kendo.dataviz.canvas.js"></script>
        <script src="../src/kendo.dataviz.themes.js"></script>
        <script src="CurveProcessor.js"></script>
    </head>
    <body>             
        <div id="testSpline"></div>
       <div id="scatter"></div>
       <div id="scatterBall"></div>
       <div id="spline"></div>
      <div id="basicSpline"></div>
     <div id="stackedSpline"></div>
        <div id="notesSpline"></div>
       <div id="splineGroupedData"></div>
     <div id="splineArea"></div>
     <div id="stackedArea"></div>
 <div id="verticalSpline"></div>
    <script>                             
          $("#scatter").kendoChart({
                seriesDefaults: {
                    type: "scatterSpline"
                },
                series: [{
                    data: [[1,2],[10,3],[9,1],[11,2],[10,0], [12,2]]
                }],               
                tooltip: {
                    visible: true,
                    format: "{1}% in {0} minutes"
                }
            });
            $("#scatterBall").kendoChart({
                seriesDefaults: {
                    type: "scatterSpline"
                },
                series: [{
                    name: "lqvo mudo",
                    data: [[1.25,0],[1,1.5],[1.25,3],[1.5,1.5],[1.25,0]]
                },{
                    name: "dqsno mudo",
                    data: [[2.75,0],[3,1.5],[2.75,3],[2.5,1.5],[2.75,0]]
                },{
                    name: "hui",
                    data: [[1.5,0],[2,0],[2.5,0],[2.5,10],[2,13],[1.5,10], [1.5,0]]
                }],               
                tooltip: {
                    visible: true,
                    format: "{1}% in {0} minutes"
                }
            });
          var stocksDataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: function() {
                            return "stock-data-2011.json";
                        },
                        dataType: "json"
                    }
                },

                group: {
                    field: "symbol"
                },
                sort: {
                    field: "date",
                    dir: "asc"
                },

                schema: {
                    model: {
                        fields: {
                            date: {
                                type: "date"
                            }
                        }
                    }
                }
            });    
            $("#spline").kendoChart({
                seriesDefaults: {
                    type: "spline"
                },
                series: [
                {
                    color:"#2f7ed8",             
                    name: "test",
                    data: [4.3, 5.1, 4.3, 5.2, 5.4, 4.7, 3.5, 4.1, 5.6, 7.4, 6.9, 7.1,
                    7.9, 7.9, 7.5, 6.7, 7.7, 7.7, 7.4, 7.0, 7.1, 5.8, 5.9, 7.4,
                    8.2, 8.5, 9.4, 8.1, 10.9, 10.4, 10.9, 12.4, 12.1, 9.5, 7.5,
                    7.1, 7.5, 8.1, 6.8, 3.4, 2.1, 1.9, 2.8, 2.9, 1.3, 4.4, 4.2,
                    3.0, 3.0],
                    markers: {
                        size: 2,
                        border:{
                            color: "black"
                        }
                    }
                }],
                tooltip: {
                    visible: true,
                    format: "{0}%",
                    template: "#= series.name #: #= value #"
                }
            });  
            $("#basicSpline").kendoChart({
                seriesDefaults: {
                    type: "spline"
                },
                series: [
                {
                    name: "India",
                    data: [3.907, 7.943, 7.848, 9.284, 9.263, 9.801, 3.890, 8.238, 9.552, 6.855]                    
                }
                ,
                {
                    name: "World",
                    data: [1.988, 2.733, 3.994, 3.464, 4.001, 3.939, 1.333, -2.245, 4.339, 2.727]
                }
                ,
                {
                    name: "Russian Federation",
                    data: [4.743, 7.295, 7.175, 6.376, 8.153, 8.535, 5.247, -7.832, 4.3, 4.3]
                }
                ,
                {
                    name: "Haiti",
                    data: [-0.253, 0.362, -3.519, 1.799, 2.252, 3.343, 0.843, 2.877, -5.416, 5.590],
                    errorBars: {
                        value: "stderr",
                        line: {
                            width: 2,
                            color: "red"
                        }
                    }
                }
                ],
                categoryAxis: {
                    categories: [2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011]
                },
                tooltip: {
                    visible: true,
                    format: "{0}%",
                    template: "#= series.name #: #= value #"
                }
            });        
            $("#stackedSpline").kendoChart({
                title: {
                    text: "Olympic Medals won by USA"
                },
                legend: {
                    visible: false
                },
                seriesDefaults: {
                    type: "spline",
                    missingValues: "gap",
                    stack: true
                },
                series: [{
                    name: "Gold Medals",
                    data: [40, 32, 34, 36, 45, 33, 34, null, 83, 36, 37, 44, 37, 35, 36, 46],
                    color: "#f3ac32"
                }, {
                    name: "Silver Medals",
                    data: [19, 25, 21, 26, 28, 31, 35, null, 60, 31, 34, 32, 24, 40, 38, 29],
                    color: "#b8b8b8"
                }, {
                    name: "Bronze Medals",
                    data: [17, 17, 16, 28, 34, 30, 25, null, 30, 27, 37, 25, 33, 26, 36, 29],
                    color: "#bb6e36"
                }],
                valueAxis: {
                    max: 180,
                    line: {
                        visible: false
                    },
                    minorGridLines: {
                        visible: true
                    }
                },
                categoryAxis: {
                    categories: [1952, 1956, 1960, 1964, 1968, 1972, 1976, 1980, 1984, 1988, 1992, 1996, 2000, 2004, 2008, 2012],
                    majorGridLines: {
                        visible: false
                    }
                },
                tooltip: {
                    visible: true,
                    template: "#= series.name #: #= value #"
                }
            });     
            
            var grandSlam = [{
                "year": "2003",
                "win": 13,
                "extremum": "MIN: 13",
                "loss": 3
            },{
                "year": "2004",
                "win": 22,
                "loss": 1
            },{
                "year": "2005",
                "win": 24,
                "loss": 2
            },{
                "year": "2006",
                "win": 27,
                "extremum": "MAX: 27",
                "loss": 1
            },{
                "year": "2007",
                "win": 26,
                "loss": 1
            },{
                "year": "2008",
                "win": 24,
                "loss": 3
            },{
                "year": "2009",
                "win": 26,
                "loss": 2
            },{
                "year": "2010",
                "win": 20,
                "loss": 3
            },{
                "year": "2011",
                "win": 20,
                "loss": 4
            },{
                "year": "2012",
                "win": 19,
                "loss": 3
            }];
            $("#notesSpline").kendoChart({
                dataSource: {
                    data: grandSlam
                },
                title: {
                    text: "Roger Federer Grand Slam tournament performance"
                },
                legend: {
                    position: "bottom"
                },
                seriesDefaults: {
                    type: "spline"
                },
                series: [{
                    field: "win",
                    name: "Wins",
                    noteTextField: "extremum",
                    notes: {
                        label: {
                            position: "outside"
                        },
                        position: "bottom"
                    }
                },{
                    field: "loss",
                    name: "Losses"
                }],
                valueAxis: {
                    line: {
                        visible: false
                    }
                },
                categoryAxis: {
                    field: "year",
                    majorGridLines: {
                        visible: false
                    }
                },
                tooltip: {
                    visible: true,
                    template: "#= series.name #: #= value #"
                }
            }); 

            $("#splineGroupedData").kendoChart({
                    title: { text: "Stock Prices" },
                    dataSource: stocksDataSource,
                    theme: "default",
                    series: [{
                        type: "spline",
                        field: "close",
                        name: "#= group.value # (close)",
                        markers: {
                            size: 2
                        }
                    }],
                    legend: {
                        position: "bottom"
                    },
                    valueAxis: {
                        labels: {
                            format: "${0}",
                            skip: 2,
                            step: 2
                        }
                    },
                    categoryAxis: {
                        field: "date",
                        labels: {
                            format: "MMM"
                        }
                    }
                });
            
            
           $("#verticalSpline").kendoChart({
                seriesDefaults: {
                    type: "verticalSpline",
                    markers: {
                        visible: true
                    }
                },
                series: [
                {
                    name: "India",
                    data: [3.907, 7.943, 7.848, 9.284, 9.263, 9.801, 3.890, 8.238, 9.552, 6.855]                    
                }
                ,
                {
                    name: "World",
                    data: [3.464, 4.001, 3.939, 1.333, -2.245, 4.339]
                }
                ,
                {
                    name: "Russian Federation",
                    data: [4.743, 7.295, 7.175, 6.376, 8.153, 8.535, 5.247, -7.832, 4.3, 4.3]
                }
                ,
                {
                    name: "Haiti",
                    data: [-0.253, 0.362, -3.519, 1.799, 2.252, 3.343, 0.843, 2.877, -5.416, 5.590]
                }
                ],
                categoryAxis: {
                    categories: [2002, 2003, 2004, 2005, 2006, 2007]
                },
                tooltip: {
                    visible: true,
                    format: "{0}%",
                    template: "#= series.name #: #= value #"
                }
            }); 
            
            $("#splineArea").kendoChart({
                title: {
                    text: "Gross domestic product growth /GDP annual %/"
                },
                legend: {
                    position: "bottom"
                },
                seriesDefaults: {
                    type: "splineArea",
                    markers:{visible: false}
                },
                series: [{
                    name: "India",
                    data: [3.907, 7.943, 7.848, 9.284, 9.263, 9.801, 3.890, 8.238, 9.552, 6.855]
                },{
                    name: "World",
                    data: [1.988, 2.733, 3.994, 3.464, 4.001, 3.939, 1.333, -2.245, 4.339, 2.727]
                },{
                    name: "Haiti",
                    data: [-0.253, 0.362, -3.519, 1.799, 2.252, 3.343, 0.843, 2.877, -5.416, 5.590]
                }],
                valueAxis: {
                    labels: {
                        format: "{0}%"
                    },
                    line: {
                        visible: false
                    },
                    axisCrossingValue: -10
                },
                categoryAxis: {
                    categories: [2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011],
                    majorGridLines: {
                        visible: false
                    }
                },
                tooltip: {
                    visible: true,
                    format: "{0}%",
                    template: "#= series.name #: #= value #"
                }
            });
            
             $("#stackedArea").kendoChart({
                title: {
                    text: "Browser Usage Trends"
                },
                legend: {
                    position: "bottom"
                },
                seriesDefaults: {
                    type: "splineArea",
                    
                    stack: true,
                    markers: {
                        visible: false
                   }
                },
                series: [{
                    name: "Chrome",
                    data: [0, 0, 0, 0, 3.6, 9.8, 22.4, 34.6]
                },{
                    name: "Firefox",
                    data: [0, 23.6, 29.9, 36.3, 44.4, 46.4, 43.5, 37.7]
                },{
                    name: "Internet Explorer",
                    data: [76.2, 68.9, 60.6, 56.0, 46.0, 37.2, 27.5, 20.2]
                },{
                    name: "Mozilla",
                    data: [16.5, 2.8, 2.5, 1.2, 0, 0, 0, 0]
                },{
                    name: "Opera",
                    data: [1.6, 1.5, 1.5, 1.6, 2.4, 2.3, 2.2, 2.5]
                },{
                    name: "Safari",
                    data: [0, 0, 0, 1.8, 2.7, 3.6, 3.8, 4.2]
                }],
                valueAxis: {
                    labels: {
                        format: "{0}%"
                    },
                    line: {
                        visible: false
                    },
                    axisCrossingValue: -10,
                    max: 100
                },
                categoryAxis: {
                    categories: [2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011],
                    majorGridLines: {
                        visible: false
                    }
                },
                tooltip: {
                    visible: true,
                    format: "{0}%",
                    template: "#= series.name #: #= value #%"
                }
            });
//test lagrange plynomial performance
            var dataviz = kendo.dataviz,
                Point = dataviz.Point2D,
                math = Math,
                view = dataviz.ViewFactory.current.create({}, "svg"),
                         xData = [ 1.2, 10, 9, 11, 10, 12],      
                         data =  [  2, 3, 1, 2, 0, 2], 
                         // xData = [ 1.2, 10, 9, 11, 10, 12],      
                         // data =  [  2, 3, 1, 2, 0, 2], 
                         // xData = [ 1.2, 10, 1, 11, 10, 12],      
                         // data =  [  2, 3, 1, 2, 0, 2], 
                    // xData = [1116.658, 1106.862, 695.114, 129.79, 1170.062],      
                    // data =  [  59.9,     96.5,     133.1,   169.7,  206.3], 
                    // xData = [ 87.95, 213.85,339.75],      
                     // data =  [ 205.93,191.516,282.477], 
                       // xData = [ 1, 9.8, 10],      
                        // data =  [ 1, 2, 3], 
                    // xData = [ 1, 6, 9, 11,9,7, 9,11, 13, 14],      
                     // data =  [ 4, 5, 6, 5, 4, 3,1, 0, 5, 0],   
                   // xData =  [1,2,3,4,5,6,7,8],      
                    // data = [0, 5, 16, 33, 56, 85, 120, 161], 
                     // xData = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],      
                     // data =  [4.3, 5.1, 4.3, 5.2, 5.4, 4.7, 3.5, 4.1, 5.6, 7.4, 6.9, 7.1,7.9, 7.9, 7.5, 6.7, 7.7, 7.7, 7.4, 7.0, 7.1, 5.8, 5.9, 7.4,8.2, 8.5, 9.4, 8.1, 10.9, 10.4, 10.9, 12.4, 12.1, 9.5, 7.5,7.1, 7.5, 8.1, 6.8, 3.4, 2.1, 1.9, 2.8, 2.9, 1.3, 4.4, 4.2,3.0, 3.0],   
                    initialPoints = [],
                    points = [],
                    height = 500,
                    min = math.min.apply(null, data),
                    max = math.ceil(math.max.apply(null, data)),
                    maxX = math.ceil(math.max.apply(null, xData)),
                    rangeMin = 0,
                    rangeMax = max,
                    baseUnit = height / max,
                    width = 1169,
                    baseUnitX = (width -100) / maxX,
                    getY = function (value){
                        return 50 + (max - value) * baseUnit;
                    },
                    getX = function (value){
                        return value * baseUnitX;
                    },
                    addPoint = function(){
                        for(var i =0; i < arguments.length;i++){
                            points.push(normalizePoint(arguments[i]));
                        }
                    },       
                    normalizePoint = function(point){
                        return new Point(getX(point.x), getY(point.y));
                        //return point.clone();
                    },
                    fn,
                    p1,
                    p,
                    dataPoints,
                    fnPoints,
                    controlPoins,
                    areaPoints,
                    pStr = "",
                    allowedError = 0.01;
   
                for(var i =0; i <data.length;i++){
                    p = new Point(xData[i],data[i]);
                    initialPoints.push(p);
                    view.children.push(view.createCircle(normalizePoint(p),1, {stroke: "black", strokeWidth: 2, zIndex: 1, fill: "black"}));
                    view.children.push(view.createText("X:" + xData[i] + " Y: " + data[i],normalizePoint(p), {stroke: "black", strokeWidth: 2, zIndex: 1, fill: "black"}));
                    pStr+= "{X:" + xData[i] + ", " + "Y:" + data[i] + "}";
                    //x++;
                }
                // $("#points").text(pStr);
         
                // var start = new Date().getTime();
               var processor = new CurveProcessor(addPoint, allowedError);
               processor.processTest(initialPoints);
             //  alert("milliseconds: " + (new Date().getTime() - start));
              //  LeastSquare.process(initialPoints, addPoint);
                                       
               //areaPoints = [new Point(points[points.length - 1].x, height), new Point(points[0].x, height)];
                
               // view.children.push(view.createCubicCurve(points, {stroke: "#2f7ed8", strokeWidth: 6,align: true, strokeLineCap: "round"}));
               // view.options.width = width + 100;
               // view.options.height = height + 100;

               // view.renderTo(document.getElementById("testSpline"));
        
        </script>
    </body>
</html>