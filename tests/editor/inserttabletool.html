
<!DOCTYPE htm\s*l>
<html>
    <head>
        <meta charset="utf-8" />
        <title>kendo.ui.Editor Tests</title>

        <script src="../jquery-loader.js"></script>
        <script src="test-scripts.js"></script>

        <style> html { font-size: 12px; } </style>
    </head>
    <body>

        <div><textarea cols="20" rows="4" id="Editor1" name="Editor1"></textarea></div>

        <script>
            $("#Editor1").kendoEditor();

            $.fn.press = function(key, ctrl, shift) {
                return this.trigger( { type: "keydown", keyCode: key, ctrlKey: ctrl, shiftKey: shift } );
            }

            var tool;

            module("Editor / InsertTableTool", {
                setup: function() {
                    editor = getEditor();
                    editor.value("");
                    tool = editor.wrapper.find('.k-createTable');
                }
            });

            test("clicking the tool toggles the popup", function() {
                tool.click();

                equal($(".k-ct-popup:visible").length, 1);

                tool.click();

                equal($(".k-ct-popup:visible").length, 0);
            });

            test("clicking a cell inserts a table", function() {
                tool.click();

                var cell = $(".k-ct-cell:first"),
                    offset = cell.offset();

                cell.trigger({
                    type: "mouseup",
                    clientX: offset.left + cell.width()/2,
                    clientY: offset.top + cell.height()/2
                });

                var dom = $("<div>" + editor.value() + "</div>");

                equal(dom.find("table").length, 1);
                equal(dom.find("tr").length, 1);
                equal(dom.find("td").length, 1);

                tool.click();
            });

            test("clicking the tool while it is disabled does not toggle the popup", function() {
                tool.addClass("k-state-disabled");

                tool.click();
                equal($(".k-ct-popup:visible").length, 0);

                tool.click();
                equal($(".k-ct-popup:visible").length, 0);
            });

        </script>

        <h1 id="qunit-header">kendo.ui.Editor Tests</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>
        <div id="qunit-fixture">test markup, will be hidden</div>
        <ul id="log"></ul>
    </body>
</html>
