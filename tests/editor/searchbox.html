<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>kendo.ui.Editor Tests</title>

<script src="../../src/jquery.js"></script>
<script src="../qunit/qunit/qunit.js"></script>
<script src="../qunit-runner.js"></script>
<script src="../../src/kendo.core.js"></script>
<script src="../../src/kendo.fx.js"></script>
<script src="../../src/kendo.data.js"></script>
<script src="../../src/kendo.popup.js"></script>
<script src="../../src/kendo.list.js"></script>
<script src="../../src/kendo.combobox.js"></script>
<script src="../../src/kendo.dropdownlist.js"></script>
<script src="../../src/kendo.window.js"></script>
<script src="../../src/kendo.colorpicker.js"></script>
        <script src="../../src/kendo.editor.js"></script>
<script src="../../src/kendo.imagebrowser.js"></script>
<script src="util.js"></script>

<link rel="stylesheet" href="../qunit/qunit/qunit.css" />
<link rel="stylesheet" href="../../styles/web/kendo.common.css" />

<style> html { font-size: 12px; } </style>
</head>
<body>

<div><textarea cols="20" rows="4" id="Editor1" name="Editor1"></textarea></div>

<script>
    
var div;

module("Editor/SearchBox", {
    setup: function() {
        div = $('<div class="k-search-wrap" />').appendTo(document.body);
    },
    teardown: function() {
        div.remove();
    }
});  

test("_focus hides the label", function() {
    var searchBox = new kendo.ui.searchBox(div[0]);
        
    searchBox._focus();
        
    ok(div.find("label").is(":not(:visible)"));
});
  
test("_blur shows the label if no value is entered", function() {
    var searchBox = new kendo.ui.searchBox(div[0]);
        
    searchBox._focus();
    searchBox._blur({});
        
    ok(div.find("label").is(":visible"));
}); 

test("_blur does not shows the label if value is entered", function() {
    var searchBox = new kendo.ui.searchBox(div[0]);
        
    searchBox._focus();
    div.find("input").val("foo");
    searchBox._blur({});
        
    ok(div.find("label").is(":not(:visible)"));
}); 

test("_blur raises change if the value has changed", function() {
    var searchBox = new kendo.ui.searchBox(div[0]);
        
    var changeRaised = false;

    div.bind("t:change", function() {
        changeRaised = true;
    });

    searchBox._focus();
        
    div.find("input").val("foo");
        
    searchBox._blur();
        
    ok(changeRaised);
});  
    
test("pressing enter raises change if the value has changed", function() {
    var searchBox = new kendo.ui.searchBox(div[0]);
        
    var changeRaised = false;

    div.bind("t:change", function() {
        changeRaised = true;
    });
        
    var e = $.Event();
    e.keyCode = 13;
    e.type = "keydown";

    div.find("input").focus().val("foo").trigger(e);
        
    ok(changeRaised);
});  

test("clicking on the button raises change", function() {
    var searchBox = new kendo.ui.searchBox(div[0]);

    var changeRaised = false;

    div.bind("t:change", function() {
        changeRaised = true;
    });

    div.find("input").val("foo");

    div.find("a:first").click();

    ok(changeRaised);
});

</script>

<h1 id="qunit-header">kendo.ui.Editor Tests</h1>
<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
<ul id="log"></ul>

</body>
</html>
