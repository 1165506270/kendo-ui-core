<!DOCTYPE html>
<html>
    <head>
        <title>kendo.ui.menu Tests</title>
        <script src="../../src/jquery.js"></script>
        <script src="../qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.fx.js"></script>
        <script src="../../src/kendo.popup.js"></script>
        <script src="../../src/kendo.menu.js"></script>
        <script type="text/javascript" src="../jquery.mockjax.js"></script>
        <link rel="stylesheet" href="../qunit.css" />
        <link type="text/css" href="../../styles/kendo.common.css" rel="stylesheet"/>
        <script type="text/javascript">

            var isRaised;

             function getRootItem(index) {
                 return $('#Menu2').find('> .k-item').eq(index)
             }

             function getMenu() {
                 return $("#Menu2").data("kendoMenu");
             }

             function onSelect() {
                 isRaised = true;
             }

        </script>
    </head>
    <body>

    <ul id="Menu2" class="k-widget k-reset k-header k-menu" style="position: absolute; visibility: hidden">
        <li class="k-item k-state-default" style=""><span class="k-link"><img
                src="../../playground/Icons/Suites/mvc.png" class="k-image" alt="image">ASP.NET MVC<span
                class="k-icon k-arrow-down"></span></span>

            <ul class="k-group">
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Mvc/Grid.png" class="k-image" alt="image">Grid</span>
                </li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Mvc/Menu.png" class="k-image" alt="image">Menu<span
                class="k-icon k-arrow-next"></span></span>
                    <ul class="k-group">
                        <li class="k-item k-state-default"><span class="k-link"><img
                                src="../../playground/Icons/Mvc/Grid.png" class="k-image" alt="image">Grid</span>
                        </li>
                        <li class="k-item k-state-default"><span class="k-link"><img
                                src="../../playground/Icons/Mvc/Menu.png" class="k-image" alt="image">Menu</span>
                        </li>
                        <li class="k-item k-state-default"><span class="k-link"><img
                                src="../../playground/Icons/Mvc/PanelBar.png" class="k-image"
                                alt="image">PanelBar</span></li>
                        <li class="k-item k-state-default"><span class="k-link"><img
                                src="../../playground/Icons/Mvc/TabStrip.png" class="k-image"
                                alt="image">TabStrip</span></li>
                    </ul>
                </li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Mvc/PanelBar.png" class="k-image"
                        alt="image">PanelBar</span></li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Mvc/TabStrip.png" class="k-image"
                        alt="image">TabStrip</span></li>
            </ul>
        </li><li class="k-item k-state-default"><span class="k-link"><img src="../../playground/Icons/Suites/sl.png"
                                                                     class="k-image" alt="image">Silverlight<span
                class="k-icon k-arrow-down"></span></span>
            <ul class="k-group">
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Sl/GridView.gif" class="k-image" alt="image">GridView</span>
                </li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Sl/Scheduler.gif" class="k-image"
                        alt="image">Scheduler</span></li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Sl/Docking.gif" class="k-image" alt="image">Docking</span>
                </li>
                <li class="k-item k-state-disabled"><span class="k-link"><img
                        src="../../playground/Icons/Sl/Chart.gif" class="k-image" alt="image">Chart</span></li>
                <li class="k-item k-state-default"><a href="http://www.telerik.com/products/silverlight.aspx"
                                                      class="k-link">... and 28 more!</a></li>
            </ul>
        </li><li class="k-item k-state-default"><span class="k-link"><img src="../../playground/Icons/Suites/ajax.png"
                                                                     class="k-image" alt="image">ASP.NET AJAX<span
                class="k-icon k-arrow-down"></span></span>
            <ul class="k-group">
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Ajax/Grid.png" class="k-image" alt="image">Grid</span></li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Ajax/Editor.png" class="k-image" alt="image">Editor</span>
                </li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Ajax/Scheduler.png" class="k-image"
                        alt="image">Scheduler</span></li>
                <li class="k-item k-state-default"><a href="http://www.telerik.com/products/aspnet-ajax.aspx"
                                                      class="k-link">... and 28 more!</a></li>
            </ul>
        </li><li class="k-item k-state-default"><a href="#Menu-4" class="k-link"><img
                src="../../playground/Icons/Suites/orm.png" class="k-image" alt="image">OpenAccess ORM<span
                class="k-icon k-arrow-down"></span></a>
            <ul class="k-group">
                <li class="k-item">
                    <div id="Menu-4" class="k-content">
                        <img alt="Telerik OpenAccess" src="../../playground/Icons/orm-comparison.png">
                        <a href="http://www.telerik.com/purchase/individual/orm.aspx" id="buy">
                            Telerik OpenAccess ORM
                        </a>
                        <a href="http://www.telerik.com/community/license-agreement.aspx?pId=639" id="express">
                            Telerik OpenAccess ORM Express
                        </a>
                    </div>
                </li>
            </ul>
        </li><li class="k-item k-state-default"><span class="k-link"><img src="../../playground/Icons/Suites/rep.png"
                class="k-image" alt="image">Reporting</span></li><li class="k-item k-state-default"><span class="k-link"><img
                src="../../playground/Icons/Suites/sitefinity.png" class="k-image" alt="image">Sitefinity ASP.NET CMS</span>
        </li><li style="border-right: 0;" class="k-item k-state-default"><span class="k-link">Other products<span
                class="k-icon k-arrow-down"></span></span>
            <ul class="k-group">
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Suites/test.png" class="k-image" alt="image">Web Testing Tools</span>
                </li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Suites/win.png" class="k-image" alt="image">WinForms UI Controls</span>
                </li>
                <li class="k-item k-state-default"><span class="k-link"><img
                        src="../../playground/Icons/Suites/wpf.png" class="k-image"
                        alt="image">WPF UI Controls</span></li>
            </ul>
        </li>
    </ul>

<script type="text/javascript">

        function getRootItem(index) {
			return $('> .k-item', menu.element).eq(index);
        }

        $("#Menu2").kendoMenu({ animation: false, select: onSelect });

        var menu;

        module("Menu / Client Events", {
            setup: function () {
                menu = $("#Menu2").data('kendoMenu');
            }
        });

        test("element select is triggered when menu element is clicked", function() {
            var item = getRootItem(0),
                triggerCount = 0;

            menu.bind("select", function() {
                triggerCount++;
            });

            item.trigger("click");

            equals(triggerCount, 1);
        });

        test('clicking disabled item should not raise onSelect event on parent item', function() {
            var item = getRootItem(1);

            isRaised = false;

            item.find('.k-item > .k-link').eq(3).trigger('click');

            ok(!isRaised);
        });

        test("open event can be canceled", function() {
            var opened = false;

            menu.open = function() { opened = true };

            menu.bind("open", function(e) {
                e.preventDefault();
            });

            menu._mouseenter({}, $("li:first", menu.element)[0]);

            equals(opened, false);
        });

        test("close event can be canceled", function() {
            var closed = false;

            menu.close = function() { closed = true };

            menu.bind("close", function(e) {
                e.preventDefault();
            });

            menu._mouseleave({}, $("li:first", menu.element)[0]);

            equals(closed, false);
        });

    </script>

    <h1 id="qunit-header">kendo.ui.Menu Tests</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup, will be hidden</div>
    <ul id="log"></ul>
</body>
</html>
