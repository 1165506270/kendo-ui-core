<!DOCTYPE html>
<html>
    <head>
        <title>kendo.ui.panelbar Tests</title>
        <script src="../../src/jquery.js"></script>
        <script src="../qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.fx.js"></script>
        <script src="../../src/kendo.panelbar.js"></script>
        <script type="text/javascript" src="../jquery.mockjax.js"></script>
        <link rel="stylesheet" href="../qunit.css" />
        <link type="text/css" href="../../styles/kendo.common.css" rel="stylesheet"/>
        <link type="text/css" href="../../styles/kendo.vista.css" rel="stylesheet"/>
        <style type="text/css">
            html
            {
                font-size: 12px;
            }
        </style>

   <script type="text/javascript">

        function getRootItem(index) {
			return $('#PanelBar1').find('.t-header').parent().eq(index).children('.t-link');
        }

        function getPanelBar() {
            return $("#PanelBar1").data("kendoPanelBar");
        }

       $(document).ready(function() {
           $("#PanelBar1").kendoPanelBar({ animation: false, contentUrls: [ 'AjaxView1.html', 'AjaxView2.html', 'AjaxView1.html', 'AjaxView2.html', 'AjaxView1.html' ] });
       });

   </script>

</head>
<body>

<ul class="t-widget t-panelbar t-reset" id="PanelBar1" style="width: 300px; float: left; visibility: hidden; position: absolute;">
    <li><a>Pure ASP.NET MVC components</a>
        <div></div>
    </li>
    <li><a>Completely Open Source</a>
        <div></div>
    </li>
    <li><a>Exceptional Performance</a>
        <div></div>
    </li>
    <li><a>Based on jQuery</a>
        <div></div>
    </li>
    <li><a>Wide Cross-browser support</a>
        <div></div>
    </li>
</ul>

<script type="text/javascript">


        asyncTest('clicking collapsed content items should expand them', function() {
            var item = getRootItem(0);

            getPanelBar().bind('contentLoad', function() {
                equal(item.parent().find('.t-content').css("display"), "block");
                getPanelBar().unbind('contentLoad');
                start();
            });

            item.trigger('click');
        });

        test('clicking expanded content items should collapse them', function() {
            var item = getRootItem(0);

            item.trigger('click');

            equal(item.parent().find('.t-content').css("display"), "none");
        });

        asyncTest('clicking collapsed content items should toggle arrow', function() {
            var item = getRootItem(1);

            getPanelBar().bind('contentLoad', function() {
                ok(item.find('.t-icon').hasClass('t-arrow-up'));
                getPanelBar().unbind('contentLoad');
                start();
            });

            item.trigger('click');
        });

        test('clicking expanded content items should toggle arrow', function() {
            var item = getRootItem(1);

            item.trigger('click');

            ok(item.find('.t-icon').hasClass('t-arrow-down'));
        });

        test('clicking should make item active', function() {

            var item = getRootItem(2);

            getPanelBar().bind('contentLoad', function() {
                ok(item.parent().hasClass('t-state-active'));
                getPanelBar().unbind('contentLoad');
                start();
            });

            item.trigger('click');
        });

</script>

<h1 id="qunit-header">kendo.ui.PanelBar Tests</h1>
<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
<ul id="log"></ul>
</body>
</html>
