<!DOCTYPE html>
<html>
<head>
    <title>kendo.ui.panelbar Tests</title>
    <script src="../../src/jquery.js"></script>
    <script src="../qunit/qunit/qunit.js"></script>
    <script src="../qunit-runner.js"></script>
    <script src="../../src/kendo.core.js"></script>
    <script src="../../src/kendo.panelbar.js"></script>
    <script type="text/javascript" src="../jquery.mockjax.js"></script>
    <link rel="stylesheet" href="../qunit/qunit/qunit.css"/>
    <link type="text/css" href="../../styles/web/kendo.common.css" rel="stylesheet"/>

    <script type="text/javascript">

        var isRaised, isExpandRaised, isCollapseRaised, isSelectRaised;

        function getRootItem(index) {
            return $('#PanelBar1').find('.k-header').parent().eq(index)
        }

        function getPanelBar() {
            return $("#PanelBar1").data("kendoPanelBar");
        }

        //handlers
        function Expand(sender, args) {
            isExpandRaised = true;
        }

        function Collapse(sender, args) {
            isCollapseRaised = true;
        }

        function Select(sender, args) {
            isSelectRaised = true;
        }

        var onLoadPanelBar;
        function Load(e) {
            isRaised = true;
            onLoadPanelBar = $("#PanelBar1").data("kendoPanelBar");
        }

        $(document).ready(function() {
            $("#PanelBar1").kendoPanelBar({ animation: false });
        });

    </script>

</head>
<body onload="Load()">

<ul class="k-widget k-panelbar k-reset" id="PanelBar1"
    style="width: 300px; float: left; margin-bottom: 30px; visibility: hidden; position: absolute;">
    <li class="k-item k-state-default"><span class="k-link k-header"><img alt="Mail Icon" class="k-image"
                                                                          src="../../playground/Icons/mail.gif">Mail<span
            class="k-icon k-i-arrow-s k-panelbar-expand"></span></span>
        <ul style="display: none;" class="k-group">
            <li class="k-item k-state-default"><span class="k-link"><img alt="Personal Folders Icon" class="k-image"
                                                                         src="../../playground/Icons/mailPersonalFolders.gif">Personal Folders</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Deleted Items Icon" class="k-image"
                                                                         src="../../playground/Icons/mailDeletedItems.gif">Deleted Items</span>
            </li>
            <li class="k-item k-state-disabled"><span class="k-link"><img alt="Inbox Icon" class="k-image"
                                                                          src="../../playground/Icons/mailInbox.gif">Inbox</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="My Mail Icon" class="k-image"
                                                                         src="../../playground/Icons/mailfolder.gif">My Mail</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Sent Items Icon" class="k-image"
                                                                         src="../../playground/Icons/mailSent.gif">Sent Items</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Outbox Icon" class="k-image"
                                                                         src="../../playground/Icons/mailOutbox.gif">Outbox</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Search Folders Icon" class="k-image"
                                                                         src="../../playground/Icons/mailSearch.gif">Search Folders</span>
            </li>
        </ul>
    </li>
    <li class="k-item k-state-disabled"><span class="k-link k-header"><img alt="Contacts Icon" class="k-image"
                                                                           src="../../playground/Icons/contacts.gif">Contacts<span
            class="k-icon k-i-arrow-s k-panelbar-expand"></span></span>
        <ul class="k-group" style="display: none;">
            <li class="k-item k-state-default"><span class="k-link"><img alt="Contact Icon" class="k-image"
                                                                         src="../../playground/Icons/contactsItems.gif">My Contacts</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Contact Icon" class="k-image"
                                                                         src="../../playground/Icons/contactsItems.gif">Address Cards</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Contact Icon" class="k-image"
                                                                         src="../../playground/Icons/contactsItems.gif">Phone List</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Contact Icon" class="k-image"
                                                                         src="../../playground/Icons/contactsItems.gif">Shared Contacts</span>
            </li>
        </ul>
    </li>
    <li class="k-item k-state-default"><span class="k-link k-header"><img alt="Tasks Icon" class="k-image"
                                                                          src="../../playground/Icons/tasks.gif">Tasks<span
            class="k-icon k-i-arrow-s k-panelbar-expand"></span></span>
        <ul class="k-group" style="display: none;">
            <li class="k-item k-state-default"><span class="k-link"><img alt="Task Icon" class="k-image"
                                                                         src="../../playground/Icons/tasksItems.gif">My Tasks</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Task Icon" class="k-image"
                                                                         src="../../playground/Icons/tasksItems.gif">Shared Tasks</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Task Icon" class="k-image"
                                                                         src="../../playground/Icons/tasksItems.gif">Active Tasks</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Task Icon" class="k-image"
                                                                         src="../../playground/Icons/tasksItems.gif">Completed Tasks</span>
            </li>
        </ul>
    </li>
    <li class="k-item k-state-active"><span class="k-link k-header k-state-selected"><img alt="Notes Icon"
                                                                                          class="k-image"
                                                                                          src="../../playground/Icons/notes.gif">Notes<span
            class="k-icon k-i-arrow-n k-panelbar-collapse"></span></span>
        <ul class="k-group" style="display: block;">
            <li class="k-item k-state-default"><span class="k-link"><img alt="Note Icon" class="k-image"
                                                                         src="../../playground/Icons/notesItems.gif">My Notes</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Note Icon" class="k-image"
                                                                         src="../../playground/Icons/notesItems.gif">Notes List</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Note Icon" class="k-image"
                                                                         src="../../playground/Icons/notesItems.gif">Shared Notes</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Note Icon" class="k-image"
                                                                         src="../../playground/Icons/notesItems.gif">Archive</span>
            </li>
        </ul>
    </li>
    <li class="k-item k-state-default"><span class="k-link k-header"><img alt="Folders List Icon" class="k-image"
                                                                          src="../../playground/Icons/foldersList.gif">Folders List<span
            class="k-icon k-i-arrow-s k-panelbar-expand"></span></span>
        <ul class="k-group" style="display: none;">
            <li class="k-item k-state-default"><span class="k-link"><img alt="Folder List Icon" class="k-image"
                                                                         src="../../playground/Icons/mailfolder.gif">My Client.Net</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Folder List Icon" class="k-image"
                                                                         src="../../playground/Icons/mailfolder.gif">My Profile<span
                    class="k-icon k-i-arrow-n k-panelbar-collapse"></span></span>
                <ul style="display: none;" class="k-group">
                    <li class="k-item k-state-default"><a href="#"
                                                          class="k-link">Server Binding</a></li>
                    <li class="k-item k-state-default"><a href="#"
                                                          class="k-link">Ajax Binding</a></li>
                    <li class="k-item k-state-default"><a href="#"
                                                          class="k-link">Web Service Binding</a></li>
                    <li class="k-item k-state-default"><a href="#"
                                                          class="k-link">Custom Binding</a></li>
                    <li class="k-item k-state-default"><a href="#"
                                                          class="k-link">Twitter Binding</a></li>
                    <li class="k-item k-state-default"><a href="#"
                                                          class="k-link">Facebook Binding</a></li>
                </ul>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Folder List Icon" class="k-image"
                                                                         src="../../playground/Icons/mailfolder.gif">My Support Tickets</span>
            </li>
            <li class="k-item k-state-default"><span class="k-link"><img alt="Folder List Icon" class="k-image"
                                                                         src="../../playground/Icons/mailfolder.gif">My Licenses</span>
            </li>
        </ul>
    </li>
</ul>

<script type="text/javascript">

    test("clicking collapsed item not expand if it is disabled", function() {

        var item = getRootItem(1);

        item
                .toggleClass("k-state-default", false)
                .toggleClass("k-state-disabled", true);

        item.find("> .k-link").trigger("mouseup");

        equal(item.find(".k-group").css("display"), "none");
    });

    test("clicking expanded items should toggle arrow", function() {
        var item = getRootItem(3);

        item.find("> .k-link").trigger("mouseup");

        ok(item.find(".k-icon").hasClass("k-i-arrow-s"));
    });

    test("clicking collapsed items should expand them", function() {
        var item = getRootItem(2);

        item.find("> .k-link").trigger("mouseup");

        equal(item.find(".k-group").css("display"), "block");
    });

    test("clicking collapsed items should toggle arrow", function() {
        var item = getRootItem(0);

        item.find("> .k-link").trigger("mouseup");

        ok(item.find(".k-icon").hasClass("k-i-arrow-n"));
    });

    test("clicking collapsed items should not expand child groups", function() {
        var item = getRootItem(4);

        item.find("> .k-link").trigger("mouseup");

        equal(item.find(".k-group .k-group").css("display"), "none");
    });

    test("clicking child group items should not collapse root group", function() {
        var item = getRootItem(4);

        getPanelBar().expand(item);

        item.find(".k-item > .k-link").trigger("mouseup");

        equal(item.find(".k-group").css("display"), "block");
    });

    test("clicking arrows toggles child groups", function() {
        var item = getRootItem(3);

        item.find("> .k-link > .k-icon").trigger("mouseup");

        equal(item.find(".k-group").css("display"), "block");
    });

</script>

<h1 id="qunit-header">kendo.ui.PanelBar Tests</h1>

<h2 id="qunit-banner"></h2>

<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
<ul id="log"></ul>
</body>
</html>
