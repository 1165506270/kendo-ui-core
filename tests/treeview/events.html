<!DOCTYPE html>
<html>
    <head>
        <title>TreeView events</title>
        <script src="../../src/jquery.js"></script>
        <script src="../qunit.js"></script>
        <script src="../qunit-runner.js"></script>
        <script src="../../src/kendo.core.js"></script>
        <script src="../../src/kendo.treeview.js"></script>
        <link rel="stylesheet" href="../qunit.css" />
        <link rel="stylesheet" href="../../styles/kendo.common.css" />
        <link rel="stylesheet" href="../../styles/kendo.vista.css" />
    </head>
    <body>
        <h1 id="qunit-header">TreeView events</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>

        <script>
            function createTreeView(options) {
                return $("<div />").appendTo(document.body).kendoTreeView(options);
            }

            function removeTreeViews() {
                $(".t-treeview").remove();
            }

            module("events", {
                teardown: removeTreeViews
            });

            test("selecting items triggers selected event and passes item as argument", function() {
                var selectedArgs,
                    treeview = createTreeView({
                        select: function(e) { selectedArgs = e; },
                        dataSource: [ { text: "foo" } ]
                    });
                    
                var item = $(".t-item:first", treeview);
                
                item.find(".t-in").trigger("click");

                ok(selectedArgs);
                equals(selectedArgs.item, item[0]);
            });

            test("clicking expand button triggers expand event", function() {
                var expandArgs,
                    treeview = createTreeView({
                        expand: function(e) { expandArgs = e; },
                        dataSource: [
                            { text: "foo", items: [
                                { text: "food" }
                            ] }
                        ]
                    });

                $(".t-plus", treeview)
                    .trigger("click");

                ok(expandArgs);
                equals(expandArgs.item, $(".t-item")[0]);
            });

            test("clicking collapse button triggers collapse event", function() {
                var collapseArgs,
                    treeview = createTreeView({
                        collapse: function(e) { collapseArgs = e; },
                        dataSource: [
                            { text: "foo", expanded: true, items: [
                                { text: "food" }
                            ] }
                        ]
                    });

                $(".t-minus", treeview)
                    .trigger("click");

                ok(collapseArgs);
                equals(collapseArgs.item, $(".t-item")[0]);
            });
        </script>

        <div id="qunit-fixture"> </div>
        <ul id="log"></ul>
    </body>
</html>

