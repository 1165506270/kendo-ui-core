<!doctype html>
<html>
    <head>
        <title>TreeView Templates</title>
        <script src="test-scripts.js"></script>
    </head>
    <body>
        <h1 id="qunit-header">TreeView Templates</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>

        <script>
            module("templates", {
                teardown: function () {
                    $(".k-treeview,.k-item").remove();
                }
            });

            test("compiled item template", function() {
                createTreeView({
                    dataSource: [
                        { text: "bar" },
                        { text: "baz" }
                    ],
                    template: kendo.template("foo #= item.text #")
                });

                var items = treeview.find(".k-item");

                equal(items.eq(0).text(), "foo bar");
                equal(items.eq(1).text(), "foo baz");
            });

            test("plain-text item template", function() {
                createTreeView({
                    dataSource: [
                        { text: "bar" },
                        { text: "baz" }
                    ],
                    template: "foo #= item.text #"
                });

                var items = treeview.find(".k-item");

                equal(items.eq(0).text(), "foo bar");
                equal(items.eq(1).text(), "foo baz");
            });

            test("template applies to sub-items", function() {
                createTreeView({
                    dataSource: [
                        { text: "bar",
                          items: [
                            { text: "baz" }
                          ]
                        }
                    ],
                    template: kendo.template("foo #= item.text #")
                });

                var items = treeview.find(".k-in");

                equal(items.eq(0).text(), "foo bar");
                equal(items.eq(1).text(), "foo baz");
            });

            test("update rendering when template-accessed property is changed", function() {
                createTreeView({
                    dataSource: [
                        { text: "foo", x: true }
                    ],
                    template: kendo.template("#= item.text # #= item.get('x') ? 'bar' : 'baz' #")
                });

                equal(treeview.find(".k-in").text(), "foo bar");

                treeviewObject.dataSource.data()[0].set("x", false);

                equal(treeview.find(".k-in").text(), "foo baz");
            });

        </script>

        <div id="qunit-fixture"> </div>
        <ul id="log"></ul>
    </body>
</html>

